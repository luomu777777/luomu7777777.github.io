<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>NodeJS | LuoMu-Blog</title><meta name="author" content="LuoMu"><meta name="copyright" content="LuoMu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="NodeJsNodeJS的应用 开发服务器应用 开发工具类应用 开发桌面端应用  命令行常用操作    说明 操作     切换盘符 C: D：   切换工作目录 cd   查看文件目录 dir   启动Js文件(需要在当前JS的文件夹下使用) node + Js文件名（需要加后缀）     编码注意事项1.NodeJs中不能使用BOM和DOM的API，可以使用console和定时器API 2.N">
<meta property="og:type" content="article">
<meta property="og:title" content="NodeJS">
<meta property="og:url" content="http://www.luomu.icu/2023/05/17/%E7%AC%AC%E5%85%AD%E7%AF%87%E6%96%87%E7%AB%A0/index.html">
<meta property="og:site_name" content="LuoMu-Blog">
<meta property="og:description" content="NodeJsNodeJS的应用 开发服务器应用 开发工具类应用 开发桌面端应用  命令行常用操作    说明 操作     切换盘符 C: D：   切换工作目录 cd   查看文件目录 dir   启动Js文件(需要在当前JS的文件夹下使用) node + Js文件名（需要加后缀）     编码注意事项1.NodeJs中不能使用BOM和DOM的API，可以使用console和定时器API 2.N">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://w.wallhaven.cc/full/gp/wallhaven-gpqypd.jpg">
<meta property="article:published_time" content="2023-05-17T07:40:00.000Z">
<meta property="article:modified_time" content="2023-05-17T07:47:43.477Z">
<meta property="article:author" content="LuoMu">
<meta property="article:tag" content="-拓展">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://w.wallhaven.cc/full/gp/wallhaven-gpqypd.jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://www.luomu.icu/2023/05/17/%E7%AC%AC%E5%85%AD%E7%AF%87%E6%96%87%E7%AB%A0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'NodeJS',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-17 15:47:43'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><span id="fps"></span><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/progress_bar.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/readPercent.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css"  media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://www.fomal.cc/static/css/runtime.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = 'hidden';
    document.getElementById('loading-box').classList.remove("loaded")
  }
}

preloader.initLoading()
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/head.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-SmartHome"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-SmartHome"></use></svg><span> 首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw icon-guidang"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guidang"></use></svg><span> 归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="fa-fw icon-biaoqian"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg><span> 标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><i class="fa-fw icon-fenlei"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg><span> 分类</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-liebiao"></use></svg><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yinle">                   </use></svg><span> 音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shipin">                   </use></svg><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-liuyanban"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-liuyanban"></use></svg><span> 留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw icon-youqinglianjie"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youqinglianjie"></use></svg><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-guanyu"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guanyu"></use></svg><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://w.wallhaven.cc/full/gp/wallhaven-gpqypd.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="LuoMu-Blog"><span class="site-name">LuoMu-Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-SmartHome"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-SmartHome"></use></svg><span> 首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw icon-guidang"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guidang"></use></svg><span> 归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="fa-fw icon-biaoqian"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg><span> 标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><i class="fa-fw icon-fenlei"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg><span> 分类</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-liebiao"></use></svg><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yinle">                   </use></svg><span> 音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shipin">                   </use></svg><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-liuyanban"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-liuyanban"></use></svg><span> 留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw icon-youqinglianjie"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youqinglianjie"></use></svg><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-guanyu"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guanyu"></use></svg><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">NodeJS</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-17T07:40:00.000Z" title="发表于 2023-05-17 15:40:00">2023-05-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-05-17T07:47:43.477Z" title="更新于 2023-05-17 15:47:43">2023-05-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8B%93%E5%B1%95/">-拓展</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">18.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>71分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="NodeJS"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="NodeJs"><a href="#NodeJs" class="headerlink" title="NodeJs"></a>NodeJs</h1><h2 id="NodeJS的应用"><a href="#NodeJS的应用" class="headerlink" title="NodeJS的应用"></a>NodeJS的应用</h2><ul>
<li>开发服务器应用</li>
<li>开发工具类应用</li>
<li>开发桌面端应用</li>
</ul>
<h2 id="命令行常用操作"><a href="#命令行常用操作" class="headerlink" title="命令行常用操作"></a>命令行常用操作</h2><div class="table-container">
<table>
<thead>
<tr>
<th>说明</th>
<th style="text-align:left">操作</th>
</tr>
</thead>
<tbody>
<tr>
<td>切换盘符</td>
<td style="text-align:left">C: D：</td>
</tr>
<tr>
<td>切换工作目录</td>
<td style="text-align:left">cd</td>
</tr>
<tr>
<td>查看文件目录</td>
<td style="text-align:left">dir</td>
</tr>
<tr>
<td>启动Js文件(需要在当前JS的文件夹下使用)</td>
<td style="text-align:left">node + Js文件名（需要加后缀）</td>
</tr>
</tbody>
</table>
</div>
<h2 id="编码注意事项"><a href="#编码注意事项" class="headerlink" title="编码注意事项"></a>编码注意事项</h2><p>1.NodeJs中不能使用BOM和DOM的API，可以使用console和定时器API</p>
<p>2.NodeJS中的顶级对象为global，也可以用globalThis访问顶级对象</p>
<h1 id="Buffer【缓冲器】"><a href="#Buffer【缓冲器】" class="headerlink" title="Buffer【缓冲器】"></a>Buffer【缓冲器】</h1><ul>
<li>buffer中文译为【缓冲区】，是一个类似于Array的对象，用于表示固定长度的字节序列，换句话说，Buffer就是一段固定长度的内存空间，用于处理二进制数据</li>
</ul>
<blockquote>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点:"></a>特点:</h3><p>1.Buffer大小固定且无法调整</p>
<p>2.Buffer性能较好，可以直接对计算机内存进行操作</p>
<p>3.每个元素的大小为1字节（byte）</p>
</blockquote>
<h3 id="创建方式"><a href="#创建方式" class="headerlink" title="创建方式"></a>创建方式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.alloc（分配）</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//创建一个10字节的buffer</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> buf  = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// console.log(buf);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.allocUnsafe(用这个创建的方法会有旧数据)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> buf_2 = <span class="title class_">Buffer</span>.<span class="title function_">allocUnsafe</span>(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// console.log(buf_2);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.from   </span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> buf_3 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//一下代码可以将数组里的数据转换成二进制</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> buf_4 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">105</span>,<span class="number">108</span>,<span class="number">111</span>,<span class="number">118</span>,<span class="number">101</span>,<span class="number">121</span>,<span class="number">111</span>,<span class="number">117</span>])</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(buf_4);</span><br></pre></td></tr></table></figure>
<h3 id="buffer的操作"><a href="#buffer的操作" class="headerlink" title="buffer的操作"></a>buffer的操作</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Buffer与字符串的转换</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">let</span> buf_4 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">105</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">118</span>, <span class="number">101</span>, <span class="number">121</span>, <span class="number">111</span>, <span class="number">117</span>])</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_4.<span class="title function_">toString</span>());<span class="comment">//转换成字符串时是默认采用UTF-8的编码格式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过[]的操作对元素的读取和修改</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//这里面的toString是用来进行对进制的转换</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf[<span class="number">0</span>].<span class="title function_">toString</span>(<span class="number">2</span>));<span class="comment">//01101000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改</span></span><br><span class="line"></span><br><span class="line">buf[<span class="number">0</span>] = <span class="number">95</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//溢出</span></span><br><span class="line">  <span class="keyword">let</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  buf[<span class="number">0</span>] = <span class="number">361</span>;<span class="comment">//舍弃高位的数字 361转换成二进制为 0001 0110 1001 =&gt; 0110 1001</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(buf);</span><br><span class="line"></span><br><span class="line"><span class="comment">//中文</span></span><br><span class="line">  <span class="keyword">let</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;你好&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(buf);</span><br></pre></td></tr></table></figure>
<h3 id="程序运行的基本流程"><a href="#程序运行的基本流程" class="headerlink" title="程序运行的基本流程"></a>程序运行的基本流程</h3><p>1.程序一般保存在硬盘中，软件安装的过程就是将程序写入硬盘的过程</p>
<p>2.程序在运行时会加载进入内存，然后由cpu读取并执行程序</p>
<h1 id="Fs模块！"><a href="#Fs模块！" class="headerlink" title="Fs模块！"></a>Fs模块！</h1><p><strong><em> fs 全称为 file system ,称之为 文件系统 ,是 Node.js 中的 内置模块 ,可以对计算机中的磁盘进行操作。</em></strong></p>
<h3 id="文件写入"><a href="#文件写入" class="headerlink" title="文件写入"></a>文件写入</h3><p><strong><em> 文件写入就是将 数据 保存到 文件 中，我们可以使用如下几个方法来实现该效果</em></strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>writeFile</td>
<td>异步写入</td>
</tr>
<tr>
<td>writeFileSync</td>
<td>同步写入</td>
</tr>
<tr>
<td>appendFile / appendFileSync</td>
<td>追加写入</td>
</tr>
<tr>
<td>createWriteStream</td>
<td>流式写入</td>
</tr>
</tbody>
</table>
</div>
<h4 id="writeFile-异步写入"><a href="#writeFile-异步写入" class="headerlink" title="writeFile 异步写入"></a>writeFile <strong>异步写入</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法： fs.<span class="title function_">writeFile</span>(file, data[, options], callback)</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>参数说明 </strong></p>
</li>
<li><p><em>file 文件名</em></p>
</li>
<li><p><em>data 待写入的数据</em></p>
</li>
<li><p><em>options 选项设置 （可选）</em></p>
</li>
<li><p><em>callback 写入回调</em></p>
</li>
<li><p><em>返回值： undefined</em></p>
<p><strong>代码示例 </strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">// //2.写入文件</span></span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>,<span class="string">&#x27;高尚是高尚者的墓志铭，卑鄙是卑鄙者的通行证&#x27;</span>,<span class="function"><span class="params">err</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//如果写入失败 err就为写入失败的错误对象。 写入成功： err的值为null</span></span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写入失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写入成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="writeFileSync-同步写入"><a href="#writeFileSync-同步写入" class="headerlink" title="writeFileSync 同步写入"></a>writeFileSync <strong>同步写入</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法: fs.<span class="title function_">writeFileSync</span>(file, data[, options])</span><br></pre></td></tr></table></figure>
<ul>
<li>参数与 fs.writeFile 大体一致，只是没有 callback 参数</li>
<li>返回值： undefined</li>
</ul>
<p><strong>代码示例 </strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">fs.<span class="title function_">writeFileSync</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>, <span class="string">&#x27;三人行，必有我师焉。&#x27;</span>);</span><br><span class="line">&#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Node.js 中的磁盘操作是由其他 线程 完成的，结果的处理有两种模式： </strong></p>
<blockquote>
<ul>
<li><p>同步处理 JavaScript 主线程 会等待 其他线程的执行结果，然后再继续执行主线程的代码，效率较低</p>
</li>
<li><p>异步处理 JavaScript 主线程 不会等待 其他线程的执行结果，直接执行后续的主线程代码，效率较好</p>
</li>
</ul>
</blockquote>
</blockquote>
<h4 id="appendFile-appendFileSync-追加写入"><a href="#appendFile-appendFileSync-追加写入" class="headerlink" title="appendFile / appendFileSync 追加写入"></a>appendFile / appendFileSync <strong>追加写入</strong></h4><p><strong>appendFile 作用是在文件尾部追加内容，appendFile 语法与 writeFile 语法完全相同 </strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法:</span><br><span class="line">fs.<span class="title function_">appendFile</span>(file, data[, options], callback)</span><br><span class="line">fs.<span class="title function_">appendFileSync</span>(file, data[, options])</span><br></pre></td></tr></table></figure>
<ul>
<li>返回值： 二者都为 undefined</li>
</ul>
<p><strong>代码示例 </strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//2.调用appendFile</span></span><br><span class="line">fs.<span class="title function_">appendFile</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>, <span class="string">&#x27;\r\n东风吹走恋爱脑，生活磨灭英雄梦&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//判断</span></span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写入失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写入成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">appendFileSync</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>, <span class="string">&#x27;\r\n你所谓的迷茫，不过是清醒的看着自己沉沦&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="createWriteStream-流式写入"><a href="#createWriteStream-流式写入" class="headerlink" title="createWriteStream 流式写入"></a>createWriteStream <strong>流式写入</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法： fs.<span class="title function_">createWriteStream</span>(path[, options])</span><br></pre></td></tr></table></figure>
<p><strong>参数说明 </strong></p>
<ul>
<li><em>path 文件路径</em></li>
<li><em>options 选项配置（ 可选 ）</em></li>
<li><em>返回值： Object</em></li>
</ul>
<p><strong>代码示例 </strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//2.创建写入流对象</span></span><br><span class="line"><span class="keyword">const</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;./relife.txt&#x27;</span>)</span><br><span class="line"><span class="comment">//3.write</span></span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;relife7\r\n&#x27;</span>)</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;relife77\r\n&#x27;</span>)</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;relife777\r\n&#x27;</span>)</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;relife7777\r\n&#x27;</span>)</span><br><span class="line"><span class="comment">//4.关闭通道</span></span><br><span class="line">ws.<span class="title function_">close</span>();</span><br></pre></td></tr></table></figure>
<p><strong>* 程序打开一个文件是需要消耗资源的，流式写入可以减少打开关闭文件的次数</strong></p>
<p><strong>* 流式写入方式适用于大文件写入或频繁写入的场景，writeFile适合于写入频繁较低的场景</strong></p>
<hr>
<h4 id="写入文件的场景"><a href="#写入文件的场景" class="headerlink" title="写入文件的场景"></a><strong>写入文件的场景</strong></h4><blockquote>
<p><strong><em> 文件写入 在计算机中是一个非常常见的操作，下面的场景都用到了文件写入</em></strong></p>
<ul>
<li><p>下载文件</p>
</li>
<li><p>安装软件</p>
</li>
<li><p>保存程序日志，如 Git</p>
</li>
<li><p>编辑器保存文件</p>
</li>
<li><p>视频录制</p>
</li>
<li><blockquote>
<p><strong><em> 当 需要持久化保存数据 的时候，应该想到 文件写入</em></strong></p>
</blockquote>
</li>
</ul>
</blockquote>
<h3 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a><strong>文件读取</strong></h3><p><strong>文件读取顾名思义，就是通过程序从文件中取出其中的数据，我们可以使用如下几种方式 </strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>readFile</td>
<td>异步读取</td>
</tr>
<tr>
<td>readFileSync</td>
<td>同步读取</td>
</tr>
<tr>
<td>createReadStream</td>
<td>流式读取</td>
</tr>
</tbody>
</table>
</div>
<h4 id="readFile-异步读取"><a href="#readFile-异步读取" class="headerlink" title="readFile 异步读取"></a>readFile <strong>异步读取</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法： fs.<span class="title function_">readFile</span>(path[, options], callback)</span><br></pre></td></tr></table></figure>
<p><strong>参数说明 </strong></p>
<ul>
<li><em>path 文件路径</em></li>
<li><em>options 选项配置 (可选)</em></li>
<li><em>callback 回调函数</em></li>
<li><em>返回值：undefined</em></li>
</ul>
<p><strong>代码示例 </strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//2.异步读取</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./relife.txt&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取成功\r\n&#x27;</span> + data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="readFileSync-同步读取"><a href="#readFileSync-同步读取" class="headerlink" title="readFileSync 同步读取"></a>readFileSync <strong>同步读取</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法： fs.<span class="title function_">readFileSync</span>(path[, options])</span><br></pre></td></tr></table></figure>
<p><strong>参数说明 </strong></p>
<ul>
<li><p><em>path 文件路径</em></p>
</li>
<li><p><em>options 选项配置</em></p>
</li>
<li><p><em>返回值：string | Buffer</em></p>
</li>
</ul>
<p><strong>代码示例 </strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> data2 = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h4 id="createReadStream流式读取"><a href="#createReadStream流式读取" class="headerlink" title="createReadStream流式读取"></a>createReadStream流式读取</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法： fs.<span class="title function_">createReadStream</span>(path[, options])</span><br></pre></td></tr></table></figure>
<p><strong>参数说明 </strong></p>
<ul>
<li><em>path 参数路径</em></li>
<li><em>options 选项配置（可选）</em></li>
<li><em>返回值：Object</em></li>
</ul>
<p><strong>代码示例 </strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//2.创建读取流对象</span></span><br><span class="line"><span class="keyword">const</span> rs = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;../video/PR 01.avi&#x27;</span>)</span><br><span class="line"><span class="comment">//3.绑定data事件 chunk 块</span></span><br><span class="line">rs.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>,<span class="function"><span class="params">chunk</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(chunk.<span class="property">length</span>); <span class="comment">//65536字节 =&gt; 64KB</span></span><br><span class="line">    <span class="comment">// console.log(chunk.toString()); //会乱码</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//4.end 可选事件</span></span><br><span class="line">rs.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取完成&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="读取文件应用场景"><a href="#读取文件应用场景" class="headerlink" title="读取文件应用场景"></a><strong>读取文件应用场景</strong></h4><blockquote>
<p><strong><em>电脑开机</em></strong></p>
<p><strong><em>程序运行</em></strong></p>
<p><strong><em>编辑器打开文件</em></strong></p>
<p><strong><em>查看图片</em></strong></p>
<p><strong><em>播放视频</em></strong></p>
<p><strong><em>播放音乐</em></strong></p>
<p><strong><em>Git 查看日志</em></strong></p>
<p><strong><em>上传文件</em></strong></p>
<p><strong><em>查看聊天记录</em></strong></p>
</blockquote>
<h3 id="文件移动与重命名"><a href="#文件移动与重命名" class="headerlink" title="文件移动与重命名"></a><strong>文件移动与重命名</strong></h3><p><strong>在 Node.js 中，我们可以使用 rename 或 renameSync 来移动或重命名 文件或文件夹</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">fs.<span class="title function_">rename</span>(oldPath, newPath, callback)</span><br><span class="line">fs.<span class="title function_">renameSync</span>(oldPath, newPath)</span><br></pre></td></tr></table></figure>
<p><strong>参数说明：</strong></p>
<ul>
<li><em>oldPath 文件当前的路径</em></li>
<li><em>newPath 文件新的路径</em></li>
<li><em>callback 操作后的回调</em></li>
</ul>
<p><strong>代码示例：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs =<span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//2.调用rename方法</span></span><br><span class="line"> fs.<span class="title function_">rename</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>,<span class="string">&#x27;./文案.txt&#x27;</span>,<span class="function"><span class="params">err</span> =&gt;</span>&#123;</span><br><span class="line">     <span class="keyword">if</span>(err)&#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作失败~&#x27;</span>);</span><br><span class="line">         <span class="keyword">return</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line"> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//文件的移动</span></span><br><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&#x27;./data.txt&#x27;</span>,<span class="string">&#x27;../video/data.txt&#x27;</span>,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作失败~&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作成功&#x27;</span>); </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="文件删除"><a href="#文件删除" class="headerlink" title="文件删除"></a><strong>文件删除</strong></h3><p><strong>在 Node.js 中，我们可以使用 unlink 或 unlinkSync 来删除文件</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">fs.<span class="title function_">unlink</span>(path, callback)</span><br><span class="line">fs.<span class="title function_">unlinkSync</span>(path)</span><br></pre></td></tr></table></figure>
<p><strong>参数说明：</strong></p>
<ul>
<li><em>path 文件路径</em></li>
<li><em>callback 操作后的回调</em></li>
</ul>
<p><strong>代码示例：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//2.调用unlink方法 同步方法unlinkSync</span></span><br><span class="line">fs.<span class="title function_">unlink</span>(<span class="string">&#x27;./relife.txt&#x27;</span>,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用rm方法  同步方法rmSync</span></span><br><span class="line">fs.<span class="title function_">rm</span>(<span class="string">&#x27;./文案.txt&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="文件夹操作"><a href="#文件夹操作" class="headerlink" title="文件夹操作"></a><strong>文件夹操作</strong></h3><p><strong>借助 Node.js 的能力，我们可以对文件夹进行 创建 、 读取 、 删除 等操作</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>mkdir / mkdirSync</td>
<td>创建文件夹</td>
</tr>
<tr>
<td>readdir / readdirSync</td>
<td>读取文件夹</td>
</tr>
<tr>
<td>rmdir / rmdirSync</td>
<td>删除文件夹</td>
</tr>
</tbody>
</table>
</div>
<h4 id="mkdir-创建文件夹"><a href="#mkdir-创建文件夹" class="headerlink" title="mkdir 创建文件夹"></a>mkdir <strong>创建文件夹</strong></h4><p><strong>在 Node.js 中，我们可以使用 mkdir 或 mkdirSync 来创建文件夹</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">fs.<span class="title function_">mkdir</span>(path[, options], callback)</span><br><span class="line">fs.<span class="title function_">mkdirSync</span>(path[, options])</span><br></pre></td></tr></table></figure>
<p><strong>参数说明：</strong></p>
<ul>
<li><em>path 文件夹路径</em></li>
<li><em>options 选项配置（ 可选 ）</em></li>
<li><em>callback 操作后的回调</em></li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//创建文件夹 mk make 制作 dir directory 文件夹</span></span><br><span class="line">fs.<span class="title function_">mkdir</span>(<span class="string">&#x27;./HTML&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2-2递归创建 recursive 递归的意思</span></span><br><span class="line">fs.<span class="title function_">mkdir</span>(<span class="string">&#x27;./a/b/c&#x27;</span>,&#123;<span class="attr">recursive</span>:<span class="literal">true</span>&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="readdir-读取文件夹"><a href="#readdir-读取文件夹" class="headerlink" title="readdir 读取文件夹"></a>readdir <strong>读取文件夹</strong></h4><p><strong>在 Node.js 中，我们可以使用 readdir 或 readdirSync 来读取文件夹</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">fs.<span class="title function_">readdir</span>(path[, options], callback)</span><br><span class="line">fs.<span class="title function_">readdirSync</span>(path[, options])</span><br></pre></td></tr></table></figure>
<p><strong>参数说明：</strong></p>
<ul>
<li><em>path 文件夹路径</em></li>
<li><em>options 选项配置（ 可选 ）</em></li>
<li><em>callback 操作后的回调</em></li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//2-3 读取文件夹 异步读取</span></span><br><span class="line">fs.<span class="title function_">readdir</span>(<span class="string">&#x27;./&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作成功\r\n&#x27;</span> + data);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br></pre></td></tr></table></figure>
<h4 id="rmdir-删除文件夹"><a href="#rmdir-删除文件夹" class="headerlink" title="rmdir 删除文件夹"></a>rmdir <strong>删除文件夹</strong></h4><p><strong>在 Node.js 中，我们可以使用 rmdir 或 rmdirSync 来删除文件夹</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">fs.<span class="title function_">rmdir</span>(path[, options], callback)</span><br><span class="line">fs.<span class="title function_">rmdirSync</span>(path[, options])</span><br></pre></td></tr></table></figure>
<p><strong>参数说明：</strong></p>
<ul>
<li><em>path 文件夹路径</em></li>
<li><em>options 选项配置（ 可选 ）</em></li>
<li><em>callback 操作后的回调</em></li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//2-4删除文件夹 rm remove 移除</span></span><br><span class="line">fs.<span class="title function_">rmdir</span>(<span class="string">&#x27;./HTML&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2-5递归删除 不推荐使用</span></span><br><span class="line">fs.<span class="title function_">rmdir</span>(<span class="string">&#x27;./a&#x27;</span>, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//建议使用</span></span><br><span class="line">fs.<span class="title function_">rm</span>(<span class="string">&#x27;./a&#x27;</span>, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="查看资源状态"><a href="#查看资源状态" class="headerlink" title="查看资源状态"></a><strong>查看资源状态</strong></h3><p><strong>在 Node.js 中，我们可以使用 stat 或 statSync 来查看资源的详细信息</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">fs.<span class="title function_">stat</span>(path[, options], callback)</span><br><span class="line">fs.<span class="title function_">statSync</span>(path[, options])</span><br></pre></td></tr></table></figure>
<p><strong>参数说明：</strong></p>
<ul>
<li><em>path 文件夹路径</em></li>
<li><em>options 选项配置（ 可选 ）</em></li>
<li>callback 操作后的回调</li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//2.stat方法 staus缩写 状态</span></span><br><span class="line">fs.<span class="title function_">stat</span>(<span class="string">&#x27;../video/原神.mp4&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;操作失败~&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    <span class="comment">//获取文件类型 isFile</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">isFile</span>());</span><br><span class="line">    <span class="comment">//isDirectory</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">isDirectory</span>());</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><em>结果值对象结构：</em></strong></p>
<p><em>size 文件体积</em></p>
<p><em>birthtime 创建时间</em></p>
<p><em>mtime 最后修改时间</em></p>
<p><em>isFile 检测是否为文件</em></p>
<p><em>isDirectory 检测是否为文件夹</em></p>
</blockquote>
<h3 id="相对路径问题"><a href="#相对路径问题" class="headerlink" title="相对路径问题"></a><strong>相对路径问题</strong></h3><p><strong>fs 模块对资源进行操作时，路径的写法有两种：</strong></p>
<p><strong><em>相对路径</em></strong></p>
<p><strong>./座右铭.txt</strong> <em>当前目录下的座右铭.txt</em></p>
<p><strong>座右铭.txt</strong> <em>等效于上面的写法</em></p>
<p><strong>../座右铭.txt</strong> <em>当前目录的上一级目录中的座右铭.tx</em>t</p>
<p><strong>绝对路径</strong></p>
<p><strong>D:/Program Files</strong>  <em>windows 系统下的绝对路径</em></p>
<p><strong>/usr/bin</strong>   <em>Linux 系统下的绝对路径</em></p>
<blockquote>
<p><strong><em>相对路径中所谓的 当前目录 ，指的是 命令行的工作目录 ，而并非是文件的所在目录</em></strong></p>
<p><strong><em>所以当命令行的工作目录与文件所在目录不一致时，会出现一些 BUG</em></strong></p>
</blockquote>
<h3 id="dirname"><a href="#dirname" class="headerlink" title="__dirname"></a><strong>__dirname</strong></h3><p><strong><em>__dirname 与 require 类似，都是 Node.js 环境中的’全局’变量</em></strong></p>
<p><em><strong>dirname 保存着 当前文件所在目录的绝对路径 ，可以使用 </strong><strong>dirname 与文件名拼接成绝对路径</strong></em></p>
<p><strong>代码示例：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/data.txt&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><em>使用 fs 模块的时候，尽量使用 __dirname 将路径转化为绝对路径，这样可以避免相对路径产生的Bug</em></p>
</blockquote>
<h1 id="PATH模块"><a href="#PATH模块" class="headerlink" title="PATH模块"></a>PATH模块</h1><p><strong>path 模块提供了 操作路径 的功能，我们将介绍如下几个较为常用的几个 API：</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>path.resolve</td>
<td>拼接规范的绝对路径 常用</td>
</tr>
<tr>
<td>path.sep</td>
<td>获取操作系统的路径分隔符</td>
</tr>
<tr>
<td>path.parse</td>
<td>解析路径并返回对象</td>
</tr>
<tr>
<td>path.basename</td>
<td>获取路径的基础名称</td>
</tr>
<tr>
<td>path.dirname</td>
<td>获取路径的目录名</td>
</tr>
<tr>
<td>path.extname</td>
<td>获得路径的扩展名</td>
</tr>
</tbody>
</table>
</div>
<p><strong>代码示例：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//导入path模块</span></span><br><span class="line"><span class="keyword">const</span> path  = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// fs.writeFileSync(__dirname + &#x27;/index.html&#x27;,&#x27;love&#x27;)</span></span><br><span class="line"><span class="comment">// console.log(__dirname + &#x27;/index.html&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//resolve 解决 第一个参数给绝对路径，第二个给相对路径</span></span><br><span class="line"><span class="comment">// console.log(path.resolve(__dirname,&#x27;./index.html&#x27;));</span></span><br><span class="line"><span class="comment">// console.log(path.resolve(__dirname,&#x27;index.html&#x27;));</span></span><br><span class="line"><span class="comment">// console.log(path.resolve(__dirname,&#x27;/index.html&#x27;,&#x27;./test&#x27;));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//sep分隔符</span></span><br><span class="line"><span class="comment">// console.log(path.sep); //window \ liunx /</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//parse 方法 __dirname &#x27;全局变量&#x27; //解析路径并返回对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(__filename); <span class="comment">//文件的绝对路径</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;D:\WebTest\\Nodejs\\代码\\Path\\path.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">parse</span>(str));</span><br><span class="line"></span><br><span class="line"><span class="comment">//basename 获取路径的基础名称</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">basename</span>(str));</span><br><span class="line"></span><br><span class="line"><span class="comment">//dirname 获取路径的目录名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">dirname</span>(str));</span><br><span class="line"></span><br><span class="line"><span class="comment">//extname 获取路径的扩展名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">extname</span>(str));</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="HTTP模块"><a href="#HTTP模块" class="headerlink" title="HTTP模块"></a>HTTP模块</h1><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a><strong>概念</strong></h3><p>HTTP（hypertext transport protocol）协议；中文叫<strong>超文本传输协议</strong></p>
<p><em>是一种基于TCP/IP的应用层通信协议</em></p>
<p><em>这个协议详细规定了 浏览器 和万维网 服务器 之间互相通信的规则。</em></p>
<p><strong><em>协议中主要规定了两个方面的内容</em></strong></p>
<p>客户端：用来向服务器发送数据，可以被称之为<strong>请求报文</strong></p>
<p>服务端：向客户端返回数据，可以被称之为<strong>响应报文</strong></p>
<blockquote>
<p><strong><em>报文：可以简单理解为就是一堆字符串</em></strong></p>
</blockquote>
<h3 id="请求报文的组成"><a href="#请求报文的组成" class="headerlink" title="请求报文的组成"></a><strong>请求报文的组成</strong></h3><ul>
<li><em>请求行</em></li>
<li><em>请求头</em></li>
<li><em>空行</em></li>
<li><em>请求体</em></li>
</ul>
<h3 id="HTTP-的请求行"><a href="#HTTP-的请求行" class="headerlink" title="HTTP 的请求行"></a><strong>HTTP</strong> <strong>的请求行</strong></h3><ul>
<li><p><strong>请求方法</strong>（get、post、put、delete等）</p>
</li>
<li><p><strong>请求 URL</strong>（统一资源定位器）</p>
</li>
</ul>
<blockquote>
<p>例如：<strong><a target="_blank" rel="noopener" href="http://www.baidu.com:80/index.html?a=100&amp;b=200#logo">http://www.baidu.com:80/index.html?a=100&amp;b=200#logo</a></strong></p>
<p><em>http：</em> 协议（https、ftp、ssh等）</p>
<p><strong><em>www.baidu.com</em></strong> 域名</p>
<p><em>80</em> 端口号</p>
<p><em>/index.html</em> 路径</p>
<p><em>a=100&amp;b=200</em> 查询字符串</p>
<p><em>#logo</em> 哈希（锚点链接）</p>
</blockquote>
<ul>
<li><strong>HTTP协议版本号</strong></li>
</ul>
<h3 id="HTTP-请求头"><a href="#HTTP-请求头" class="headerlink" title="HTTP 请求头"></a><strong>HTTP</strong> <strong>请求头</strong></h3><p><em>格式：『头名：头值』</em></p>
<p><strong>常见的请求头有：</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>请求头</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>Host</td>
<td>主机名</td>
</tr>
<tr>
<td>Connection</td>
<td>连接的设置 keep-alive（保持连接）；close（关闭连接）</td>
</tr>
<tr>
<td>Cache-Control</td>
<td>缓存控制 max-age = 0 （没有缓存）</td>
</tr>
<tr>
<td>Upgrade-Insecure-Requests</td>
<td>将网页中的http请求转化为https请求（很少用）老网站升级</td>
</tr>
<tr>
<td>User-Agent</td>
<td>用户代理，客户端字符串标识，服务器可以通过这个标识来识别这个请求来自哪个客户端 ，一般在PC端和手机端的区分</td>
</tr>
<tr>
<td>Accept</td>
<td>设置浏览器接收的数据类型</td>
</tr>
<tr>
<td>Accept-Encoding</td>
<td>设置接收的压缩方式</td>
</tr>
<tr>
<td>Accept-Language</td>
<td>设置接收的语言 q=0.7 为喜好系数，满分为1</td>
</tr>
<tr>
<td>Cookie</td>
<td>用户访问网站携带的唯一标识</td>
</tr>
</tbody>
</table>
</div>
<h3 id="HTTP-的请求体"><a href="#HTTP-的请求体" class="headerlink" title="HTTP 的请求体"></a><strong>HTTP</strong> <strong>的请求体</strong></h3><p><em>请求体内容的格式是非常灵活的，</em></p>
<p>（可以是空）==&gt; GET请求，</p>
<p>（也可以是字符串，还可以是JSON）===&gt; POST请求</p>
<p><strong>例如：</strong></p>
<ul>
<li><p><em>字符串：keywords=手机&amp;price=2000</em></p>
</li>
<li><p><em>JSON：{“keywords”:”手机”,”price”:2000}</em></p>
</li>
</ul>
<h3 id="响应报文的组成"><a href="#响应报文的组成" class="headerlink" title="响应报文的组成"></a><strong>响应报文的组成</strong></h3><ul>
<li><strong><em>响应行</em></strong></li>
</ul>
<blockquote>
<p> <strong><em>HTTP/1.1 200 OK</em></strong></p>
<ul>
<li><p>HTTP/1.1：HTTP协议版本号</p>
</li>
<li><p>200：响应状态码 404 Not Found 500 Internal Server Error</p>
</li>
<li><p>还有一些状态码，参考：<strong><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status</a></strong></p>
</li>
<li><p>OK： 响应状态描述</p>
</li>
<li><blockquote>
<p> <strong><em>响应状态码和响应字符串关系是一一对应的。</em></strong></p>
</blockquote>
</li>
</ul>
</blockquote>
<ul>
<li><strong><em>响应头</em></strong></li>
</ul>
<blockquote>
<p><em>Cache-Control:缓存控制 private 私有的，只允许客户端缓存数据</em></p>
<p><em>Connection 链接设置</em></p>
<p><em>Content-Type:text/html;charset=utf-8 设置响应体的数据类型以及字符集,响应体为html，字符集:utf-8</em></p>
<p><em>Content-Length:响应体的长度，单位为字节</em></p>
</blockquote>
<ul>
<li><p><strong><em>空行</em></strong></p>
</li>
<li><p><strong><em>响应体</em></strong></p>
</li>
</ul>
<blockquote>
<p><em>响应体内容的类型是非常灵活的，常见的类型有 HTML、CSS、JS、图片、JSON</em> </p>
</blockquote>
<h3 id="创建-HTTP-服务"><a href="#创建-HTTP-服务" class="headerlink" title="创建 HTTP 服务"></a><strong>创建</strong> <strong>HTTP</strong> <strong>服务</strong></h3><p>使用 nodejs 创建 HTTP 服务</p>
<h4 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a><strong>操作步骤</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="comment">//2. 创建服务对象 create 创建 server 服务</span></span><br><span class="line"><span class="comment">// request 意为请求. 是对请求报文的封装对象, 通过 request 对象可以获得请求报文的数据</span></span><br><span class="line"><span class="comment">// response 意为响应. 是对响应报文的封装对象, 通过 response 对象可以设置响应报文</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">response.<span class="title function_">end</span>(<span class="string">&#x27;Hello HTTP server&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//3. 监听端口, 启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口 9000 监听中...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><em>http.createServer 里的回调函数的执行时机： 当接收到 HTTP 请求的时候，就会执行</em></strong></p>
</blockquote>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a><strong>测试</strong></h4><p>浏览器请求对应端口</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1:9000">http://127.0.0.1:9000</a></p>
</blockquote>
<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a><strong>注意事项</strong></h4><ol>
<li><p>命令行 ctrl + c 停止服务</p>
</li>
<li><p>当服务启动后，更新代码 必须重启服务才能生效</p>
</li>
<li><p>响应内容中文乱码的解决办法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>,<span class="string">&#x27;text/html;charset=utf-8&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>端口号被占用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Error</span>: listen <span class="attr">EADDRINUSE</span>: address already <span class="keyword">in</span> use :::<span class="number">9000</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><em>1）关闭当前正在运行监听端口的服务 （ 使用较多 ）</em></p>
<p><em>2）修改其他端口号</em></p>
</blockquote>
</li>
</ol>
<p>​    5.HTTP 协议默认端口是 80 。HTTPS 协议的默认端口是 443, HTTP 服务开发常用端口有 3000，8080，8090，9000 等</p>
<blockquote>
<p><strong><em>如果端口被其他程序占用，可以使用 资源监视器 找到占用端口的程序，然后使用 任务管理器 关闭对应的程序</em></strong></p>
</blockquote>
<h3 id="浏览器查看-HTTP-报文"><a href="#浏览器查看-HTTP-报文" class="headerlink" title="浏览器查看 HTTP 报文"></a><strong>浏览器查看</strong> <strong>HTTP</strong> <strong>报文</strong></h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230406222457916.png" alt="image-20230406222457916"></p>
<h4 id="查看请求行与请求头"><a href="#查看请求行与请求头" class="headerlink" title="查看请求行与请求头"></a><strong>查看请求行与请求头</strong></h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230406222520040.png" alt="image-20230406222520040"></p>
<h4 id="查看请求体"><a href="#查看请求体" class="headerlink" title="查看请求体"></a><strong>查看请求体</strong></h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230406222537980.png" alt="image-20230406222537980"></p>
<h4 id="查看-URL-查询字符串"><a href="#查看-URL-查询字符串" class="headerlink" title="查看 URL 查询字符串"></a><strong>查看</strong> <strong>URL</strong> <strong>查询字符串</strong></h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230406222601325.png" alt="image-20230406222601325"></p>
<h4 id="查看响应行与响应头"><a href="#查看响应行与响应头" class="headerlink" title="查看响应行与响应头"></a><strong>查看响应行与响应头</strong></h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230406222618906.png" alt="image-20230406222618906"></p>
<h4 id="查看响应体"><a href="#查看响应体" class="headerlink" title="查看响应体"></a><strong>查看响应体</strong></h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230406222632259.png" alt="image-20230406222632259"></p>
<h3 id="获取-HTTP-请求报文"><a href="#获取-HTTP-请求报文" class="headerlink" title="获取 HTTP 请求报文"></a><strong>获取</strong> <strong>HTTP</strong> <strong>请求报文</strong></h3><p><em>想要获取请求的数据，需要通过 request 对象</em></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>含义</th>
<th>语法</th>
<th>重点掌握</th>
</tr>
</thead>
<tbody>
<tr>
<td>请求方法</td>
<td>request.method</td>
<td>*</td>
</tr>
<tr>
<td>请求版本</td>
<td>request.httpVersion</td>
<td></td>
</tr>
<tr>
<td>请求路径</td>
<td>request.url</td>
<td>*</td>
</tr>
<tr>
<td>URL 路径</td>
<td>require(‘url’).parse(request.url).pathname</td>
<td>*</td>
</tr>
<tr>
<td>URL 查询字符串</td>
<td>require(‘url’).parse(request.url, true).query</td>
<td>*</td>
</tr>
<tr>
<td>请求头</td>
<td>request.headers</td>
<td>*</td>
</tr>
<tr>
<td>请求体</td>
<td>request.on(‘data’, function(chunk){})   request.on(‘end’, function(){});</td>
</tr>
</tbody>
</table>
</div>
<p>注意事项：</p>
<blockquote>
<ol>
<li><p><em>request.url 只能获取路径以及查询字符串，无法获取 URL 中的域名以及协议的内容</em></p>
</li>
<li><p><em>request.headers 将请求信息转化成一个对象，并将属性名都转化成了『小写』</em></p>
</li>
<li><p><em>关于路径：如果访问网站的时候，只填写了 IP 地址或者是域名信息，此时请求的路径为『 / 』</em></p>
</li>
<li><p><em>关于 favicon.ico：这个请求是属于浏览器自动发送的请求</em></p>
</li>
</ol>
</blockquote>
<h3 id="设置-HTTP-响应报文"><a href="#设置-HTTP-响应报文" class="headerlink" title="设置 HTTP 响应报文"></a><strong>设置</strong> <strong>HTTP</strong> <strong>响应报文</strong></h3><div class="table-container">
<table>
<thead>
<tr>
<th>作用</th>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr>
<td>设置响应状态码</td>
<td>response.statusCode</td>
</tr>
<tr>
<td>设置响应状态描述</td>
<td>response.statusMessage （ 用的非常少 ）</td>
</tr>
<tr>
<td>设置响应头信息</td>
<td>response.setHeader(‘头名’, ‘头值’)</td>
</tr>
<tr>
<td>设置响应体</td>
<td>response.write(‘xx’)/response.end(‘xxx’)</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">write 和 end 的两种使用情况：</span><br><span class="line"><span class="comment">//1. write 和 end 的结合使用 响应体相对分散</span></span><br><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">end</span>(); <span class="comment">//每一个请求，在处理的时候必须要执行 end 方法的</span></span><br><span class="line"><span class="comment">//2. 单独使用 end 方法 响应体相对集中</span></span><br><span class="line">response.<span class="title function_">end</span>(<span class="string">&#x27;xxx&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="网页资源的基本加载过程"><a href="#网页资源的基本加载过程" class="headerlink" title="网页资源的基本加载过程"></a><strong>网页资源的基本加载过程</strong></h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230407140105509.png" alt="image-20230407140105509"></p>
<p><em>网页资源的加载都是循序渐进的，首先获取 HTML 的内容， 然后解析 HTML 在发送其他资源的请求，如CSS，Javascript，图片等。 理解了这个内容对于后续的学习与成长有非常大的帮助</em></p>
<h3 id="静态资源服务"><a href="#静态资源服务" class="headerlink" title="静态资源服务"></a><strong>静态资源服务</strong></h3><p><em>静态资源是指 <strong>内容长时间不发生改变</strong>的资源 ，例如图片，视频，CSS 文件，JS文件，HTML文件，字体文件等</em></p>
<p><em>动态资源是指 <strong>内容经常更新</strong>的资源 ，例如百度首页，网易首页，京东搜索列表页面等</em></p>
<h4 id="网站根目录或静态资源目录"><a href="#网站根目录或静态资源目录" class="headerlink" title="网站根目录或静态资源目录"></a><strong>网站根目录或静态资源目录</strong></h4><p>HTTP 服务在哪个文件夹中寻找静态资源，那个文件夹就是 静态资源目录 ，也称之为 网站根目录</p>
<blockquote>
<p>思考：vscode 中使用 live-server 访问 HTML 时， 它启动的服务中网站根目录是谁？ <strong>文件所在的文件夹</strong></p>
</blockquote>
<h4 id="网页中的-URL"><a href="#网页中的-URL" class="headerlink" title="网页中的 URL"></a><strong>网页中的</strong> <strong>URL</strong></h4><p>网页中的 URL 主要分为两大类：相对路径与绝对路径</p>
<h4 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a><strong>绝对路径</strong></h4><p><em>绝对路径可靠性强，而且相对容易理解，在项目中运用较多</em></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>形式</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a target="_blank" rel="noopener" href="http://atguigu.com/web">http://atguigu.com/web</a> </strong></td>
<td>直接向目标资源发送请求，容易理解。网站的外链会用到此形式</td>
</tr>
<tr>
<td>//atguigu.com/web</td>
<td>与页面 URL 的协议拼接形成完整 URL 再发送请求。大型网站用的比较多</td>
</tr>
<tr>
<td>/web</td>
<td>与页面 URL 的协议、主机名、端口拼接形成完整 URL 再发送请求。中小型网站</td>
</tr>
</tbody>
</table>
</div>
<h4 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a><strong>相对路径</strong></h4><p>相对路径在发送请求时，需要与当前页面 URL 路径进行 计算 ，得到完整 URL 后，再发送请求，学习阶段用的较多</p>
<p>例如当前网页 url 为 <strong><a target="_blank" rel="noopener" href="http://www.atguigu.com/course/h5.html">http://www.atguigu.com/course/h5.html</a></strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>形式</th>
<th>最终的URL</th>
</tr>
</thead>
<tbody>
<tr>
<td>./css/app.css</td>
<td><strong><a target="_blank" rel="noopener" href="http://www.atguigu.com/course/css/app.css">http://www.atguigu.com/course/css/app.css</a></strong></td>
</tr>
<tr>
<td>js/app.js</td>
<td><strong><a target="_blank" rel="noopener" href="http://www.atguigu.com/course/js/app.js">http://www.atguigu.com/course/js/app.js</a></strong></td>
</tr>
<tr>
<td>../img/logo.png</td>
<td><strong><a target="_blank" rel="noopener" href="http://www.atguigu.com/img/logo.png">http://www.atguigu.com/img/logo.png</a></strong></td>
</tr>
<tr>
<td>../../mp4/show.mp4</td>
<td><strong><a target="_blank" rel="noopener" href="http://www.atguigu.com/mp4/show.mp4">http://www.atguigu.com/mp4/show.mp4</a></strong></td>
</tr>
</tbody>
</table>
</div>
<h4 id="网页中使用-URL-的场景小结"><a href="#网页中使用-URL-的场景小结" class="headerlink" title="网页中使用 URL 的场景小结"></a><strong>网页中使用</strong> <strong>URL</strong> <strong>的场景小结</strong></h4><p>包括但不限于如下场景：</p>
<ul>
<li>a 标签 href</li>
<li>link 标签 href</li>
<li>script 标签 src</li>
<li>img 标签 srcvideo audio 标签 src</li>
<li>form 中的 action</li>
<li>AJAX 请求中的 URL</li>
</ul>
<h4 id="设置资源类型（mime-类型）"><a href="#设置资源类型（mime-类型）" class="headerlink" title="设置资源类型（mime 类型）"></a><strong>设置资源类型（mime 类型）</strong></h4><p><strong>媒体类型</strong>（通常称为 Multipurpose Internet Mail Extensions 或 MIME 类型 ）是一种标准，用来表示文档、文件或字节流的性质和格式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mime 类型结构： [type]/[subType]</span><br><span class="line">例如： text/html text/css image/jpeg image/png application/json</span><br></pre></td></tr></table></figure>
<p>HTTP 服务可以设置响应头 Content-Type 来表明响应体的 MIME 类型，浏览器会根据该类型决定如何处理资源</p>
<p>下面是常见文件对应的 mime 类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">html</span>: <span class="string">&#x27;text/html&#x27;</span>,</span><br><span class="line"><span class="attr">css</span>: <span class="string">&#x27;text/css&#x27;</span>,</span><br><span class="line"><span class="attr">js</span>: <span class="string">&#x27;text/javascript&#x27;</span>,</span><br><span class="line"><span class="attr">png</span>: <span class="string">&#x27;image/png&#x27;</span>,</span><br><span class="line"><span class="attr">jpg</span>: <span class="string">&#x27;image/jpeg&#x27;</span>,</span><br><span class="line"><span class="attr">gif</span>: <span class="string">&#x27;image/gif&#x27;</span>,</span><br><span class="line"><span class="attr">mp4</span>: <span class="string">&#x27;video/mp4&#x27;</span>,</span><br><span class="line"><span class="attr">mp3</span>: <span class="string">&#x27;audio/mpeg&#x27;</span>,</span><br><span class="line"><span class="attr">json</span>: <span class="string">&#x27;application/json&#x27;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><em>*</em>对于未知的资源类型，可以选择 application/octet-stream 类型，浏览器在遇到该类型的响应时，会对响应体内容进行独立存储，也就是我们常见的 下载 效果</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.导入http模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="comment">//读取文件导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//2.创建服务对象 request请求 response响应（这两都是形参）</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//获取请求的url</span></span><br><span class="line">    <span class="keyword">let</span> &#123; pathname &#125; = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>, <span class="string">&#x27;http://127.0.0.1:9000&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (pathname === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">//读取文件内容</span></span><br><span class="line">        <span class="keyword">let</span> html = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/table.html&#x27;</span>)</span><br><span class="line">        response.<span class="title function_">end</span>(html)<span class="comment">//参数可以是字符串也可以是个buffer</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/index.css&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> css = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/index.css&#x27;</span>)</span><br><span class="line">        response.<span class="title function_">end</span>(css)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/index.js&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> js = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/index.js&#x27;</span>)</span><br><span class="line">        response.<span class="title function_">end</span>(js)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        response.<span class="property">statusCode</span> = <span class="number">404</span></span><br><span class="line">        response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;404 NOT Found&lt;/h1&gt;&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//3.监听端口，启动服务 9000为端口号</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动....&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>很明显上面的代码，当只要有一个请求路径就需要进行判断，显然这种方式不够完美，那么我们需要封装</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.导入http模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="comment">//读取文件导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> mimes = &#123;</span><br><span class="line">    <span class="attr">html</span>: <span class="string">&#x27;text/html&#x27;</span>,</span><br><span class="line">    <span class="attr">css</span>: <span class="string">&#x27;text/css&#x27;</span>,</span><br><span class="line">    <span class="attr">js</span>: <span class="string">&#x27;text/javascript&#x27;</span>,</span><br><span class="line">    <span class="attr">png</span>: <span class="string">&#x27;image/png&#x27;</span>,</span><br><span class="line">    <span class="attr">jpg</span>: <span class="string">&#x27;image/jpeg&#x27;</span>,</span><br><span class="line">    <span class="attr">gif</span>: <span class="string">&#x27;image/gif&#x27;</span>,</span><br><span class="line">    <span class="attr">mp4</span>: <span class="string">&#x27;video/mp4&#x27;</span>,</span><br><span class="line">    <span class="attr">mp3</span>: <span class="string">&#x27;audio/mpeg&#x27;</span>,</span><br><span class="line">    <span class="attr">json</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.创建服务对象 request请求 response响应（这两都是形参）</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(request.<span class="property">method</span> !==<span class="string">&#x27;GET&#x27;</span>)&#123;</span><br><span class="line">        response.<span class="property">statusCode</span> = <span class="number">405</span></span><br><span class="line">        response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;405 Method NOT Allowed&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取请求的url</span></span><br><span class="line">    <span class="keyword">let</span> &#123; pathname &#125; = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>, <span class="string">&#x27;http://127.0.0.1&#x27;</span>)</span><br><span class="line">    <span class="comment">//声明一个变量 网站根目录可以根据自己需求去调整</span></span><br><span class="line">    <span class="keyword">let</span> root = __dirname + <span class="string">&#x27;/page&#x27;</span></span><br><span class="line">    <span class="comment">// let root = __dirname + &#x27;/../&#x27;</span></span><br><span class="line">    <span class="comment">//拼接文件路径</span></span><br><span class="line">    <span class="keyword">let</span> filepath = root + pathname;</span><br><span class="line">    <span class="comment">//读取文件 fs 异步 API</span></span><br><span class="line">    fs.<span class="title function_">readFile</span>(filepath, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// console.log(err);</span></span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="comment">//判断错误代号</span></span><br><span class="line">            <span class="keyword">switch</span> (err.<span class="property">code</span>) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;ENOENT&#x27;</span>:</span><br><span class="line">                    response.<span class="property">statusCode</span> = <span class="number">404</span></span><br><span class="line">                    response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;404 NOT Found&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;EPERM&#x27;</span>:</span><br><span class="line">                    response.<span class="property">statusCode</span> = <span class="number">403</span></span><br><span class="line">                    response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">                <span class="attr">default</span>:</span><br><span class="line">                    response.<span class="property">statusCode</span> = <span class="number">500</span>   </span><br><span class="line">                    response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;500 Internal Server Error&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//获取文件后缀名.slice(1)是为了去除后缀里的小数点</span></span><br><span class="line">            <span class="keyword">let</span> ext = path.<span class="title function_">extname</span>(filepath).<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">            <span class="comment">// console.log(ext);</span></span><br><span class="line">            <span class="comment">//获取对应的类型</span></span><br><span class="line">            <span class="keyword">let</span> type = mimes[ext]</span><br><span class="line">            <span class="keyword">if</span> (type) &#123;</span><br><span class="line">                <span class="comment">//匹配到了</span></span><br><span class="line">                <span class="comment">//解决乱码问题text/html(type);charset=utf-8</span></span><br><span class="line">                response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>, type + <span class="string">&#x27;;charset=utf-8&#x27;</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//没有匹配到</span></span><br><span class="line">                response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;application/octet-stream&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//响应读取文件</span></span><br><span class="line">            response.<span class="title function_">end</span>(data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//3.监听端口，启动服务 9000为端口号</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动....&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>GET</strong> <strong>和</strong> <strong>POST</strong> <strong>请求场景小结</strong></p>
<p><strong>GET 请求的情况：</strong></p>
<ol>
<li><em>在地址栏直接输入 url 访问</em></li>
<li><em>点击 a 链接</em></li>
<li><em>link 标签引入 css</em></li>
<li><em>script 标签引入 js</em></li>
<li><em>img 标签引入图片</em></li>
<li><em>form 标签中的 method 为 get （不区分大小写）</em></li>
<li><em>ajax 中的 get 请求</em></li>
</ol>
<p><strong>POST 请求的情况：</strong></p>
<ol>
<li><em>form 标签中的 method 为 post（不区分大小写）</em></li>
<li><em>AJAX 的 post 请求</em></li>
</ol>
<h3 id="GET和POST请求的区别"><a href="#GET和POST请求的区别" class="headerlink" title="GET和POST请求的区别"></a>GET和POST请求的区别</h3><p>GET 和 POST 是 HTTP 协议请求的两种方式。</p>
<ul>
<li><strong>GET 主要用来获取数据，POST 主要用来提交数据</strong></li>
<li><strong>GET 带参数请求是将参数缀到 URL 之后，在地址栏中输入 url 访问网站就是 GET 请求，</strong></li>
<li><strong>POST 带参数请求是将参数放到请求体中</strong></li>
<li><strong>POST 请求相对 GET 安全一些，因为在浏览器中参数会暴露在地址栏</strong></li>
<li><strong>GET 请求大小有限制，一般为 2K，而 POST 请求则没有大小限制</strong></li>
</ul>
<h1 id="Node-js-模块化"><a href="#Node-js-模块化" class="headerlink" title="Node.js 模块化"></a><strong>Node.js</strong> <strong>模块化</strong></h1><h3 id="什么是模块化与模块"><a href="#什么是模块化与模块" class="headerlink" title="什么是模块化与模块 ?"></a><strong>什么是模块化与模块</strong> <strong>?</strong></h3><p><em>将一个复杂的程序文件依据一定规则（规范）拆分成多个文件的过程称之为 模块化</em></p>
<p><em>其中拆分出的 每个文件就是一个模块 ，模块的内部数据是私有的，不过模块可以暴露内部数据以便其他模块使用</em></p>
<h3 id="什么是模块化项目"><a href="#什么是模块化项目" class="headerlink" title="什么是模块化项目 ?"></a><strong>什么是模块化项目</strong> <strong>?</strong></h3><p>编码时是按照模块一个一个编码的， 整个项目就是一个模块化的项目</p>
<h3 id="模块化好处"><a href="#模块化好处" class="headerlink" title="模块化好处"></a><strong>模块化好处</strong></h3><p>下面是模块化的一些好处：</p>
<ol>
<li><p><strong><em>防止命名冲突</em></strong></p>
</li>
<li><p><strong><em>高复用性</em></strong></p>
</li>
<li><p><strong><em>高维护性</em></strong></p>
</li>
</ol>
<h2 id="模块暴露数据"><a href="#模块暴露数据" class="headerlink" title="模块暴露数据"></a><strong>模块暴露数据</strong></h2><h3 id="模块初体验"><a href="#模块初体验" class="headerlink" title="模块初体验"></a><strong>模块初体验</strong></h3><p>可以通过下面的操作步骤，快速体验模块化</p>
<p>创建 me.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">tiemo</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;贴膜....&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//暴露数据</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = tiemo;</span><br></pre></td></tr></table></figure>
<p>创建 index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入模块</span></span><br><span class="line"><span class="keyword">const</span> tiemo = <span class="built_in">require</span>(<span class="string">&#x27;./me.js&#x27;</span>);</span><br><span class="line"><span class="comment">//调用函数</span></span><br><span class="line"><span class="title function_">tiemo</span>();</span><br></pre></td></tr></table></figure>
<p><strong>暴露数据</strong></p>
<p>模块暴露数据的方式有两种：</p>
<ol>
<li><p><strong><em>module.exports = value</em></strong></p>
</li>
<li><p><strong><em>exports.name = value</em></strong></p>
</li>
</ol>
<blockquote>
<p>使用时有几点注意：</p>
<p><em>　module.exports 可以暴露 任意 数据
</em>　不能使用 exports = value 的形式暴露数据，模块内部 module 与 exports 的隐式关系<br>*　exports = module.exports = {} ，require 返回的是目标模块中 module.exports 的值</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230407203646007.png" alt="image-20230407203646007"></p>
<h2 id="导入（引入）模块"><a href="#导入（引入）模块" class="headerlink" title="导入（引入）模块"></a><strong>导入（引入）模块</strong></h2><p>在模块中使用 require 传入文件路径即可引入文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = <span class="built_in">require</span>(<span class="string">&#x27;./me.js&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p><em>require 使用的一些注意事项：</em></p>
<blockquote>
<ol>
<li><p><strong><em>对于自己创建的模块，导入时路径建议写 相对路径 ，且不能省略 ./ 和 ../</em></strong></p>
</li>
<li><p><strong><em>js 和 json 文件导入时可以不用写后缀，c/c++编写的 node 扩展文件也可以不写后缀，但是一般用不到</em></strong></p>
</li>
<li><p><strong><em>如果导入其他类型的文件，会以 js 文件进行处理</em></strong></p>
</li>
<li><p><strong><em>如果导入的路径是个文件夹，则会 首先 检测该文件夹下 package.json 文件中 main 属性对应的文件，如果存在则导入，反之如果文件不存在会报错。如果 main 属性不存在，或者 package.json 不存在，则会尝试导入文件夹下的 index.js 和index.json ，如果还是没找到，就会报错</em></strong></p>
</li>
<li><p><strong><em>导入 node.js 内置模块时，直接 require 模块的名字即可，无需加 ./ 和 ../</em></strong></p>
</li>
</ol>
</blockquote>
<h2 id="导入模块的基本流程"><a href="#导入模块的基本流程" class="headerlink" title="导入模块的基本流程"></a><strong>导入模块的基本流程</strong></h2><p>这里我们介绍一下 require 导入 自定义模块 的基本流程</p>
<ol>
<li><p><em>将相对路径转为绝对路径，定位目标文件</em></p>
</li>
<li><p><em>缓存检测</em></p>
</li>
<li><p><em>读取目标文件代码</em></p>
</li>
<li><p><em>包裹为一个函数并执行（自执行函数）。通过 arguments.callee.toString() 查看自执行函数</em></p>
</li>
<li><p><em>缓存模块的值</em></p>
</li>
<li><p><em>返回 module.exports 的值</em></p>
</li>
</ol>
<h2 id="CommonJS-规范"><a href="#CommonJS-规范" class="headerlink" title="CommonJS 规范"></a><strong>CommonJS</strong> <strong>规范</strong></h2><blockquote>
<p><em>module.exports 、 exports 以及 require 这些都是 CommonJS 模块化规范中的内容。</em></p>
<p><em>而 Node.js 是实现了 CommonJS 模块化规范，二者关系有点像 JavaScript 与 ECMAScrip</em>t</p>
</blockquote>
<h1 id="包管理工具"><a href="#包管理工具" class="headerlink" title="包管理工具"></a><strong>包管理工具</strong></h1><h3 id="包是什么"><a href="#包是什么" class="headerlink" title="包是什么"></a><strong>包是什么</strong></h3><p>『包』英文单词是 package ，代表了一组特定功能的源码集合</p>
<h3 id="包管理工具-1"><a href="#包管理工具-1" class="headerlink" title="包管理工具"></a><strong>包管理工具</strong></h3><p><em>管理『包』的应用软件，可以对「包」进行 下载安装 ， 更新 ， 删除 ， 上传 等操作</em></p>
<p><em>借助包管理工具，可以快速开发项目，提升开发效率</em></p>
<p><em>包管理工具是一个通用的概念，很多编程语言都有包管理工具，所以 掌握好包管理工具非常重要</em></p>
<h3 id="常用的包管理工具"><a href="#常用的包管理工具" class="headerlink" title="常用的包管理工具"></a><strong>常用的包管理工具</strong></h3><p>下面列举了前端常用的包管理工具</p>
<p><strong><em>npm</em></strong></p>
<p><strong><em>yarn</em></strong></p>
<p><strong><em>cnpm</em></strong></p>
<h2 id="npm"><a href="#npm" class="headerlink" title="npm"></a><strong>npm</strong></h2><p><em>npm 全称 Node Package Manager ，翻译为中文意思是『Node 的包管理工具』</em></p>
<p><em>npm 是 node.js 官方内置的包管理工具，是 必须要掌握住的工具</em></p>
<h3 id="npm-的安装"><a href="#npm-的安装" class="headerlink" title="npm 的安装"></a><strong>npm</strong> <strong>的安装</strong></h3><p>node.js 在安装时会 自动安装 npm ，所以如果你已经安装了 node.js，可以直接使用 npm</p>
<p>可以通过 npm -v 查看版本号测试，如果显示版本号说明安装成功，反之安装失败</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230408144928777.png" alt="image-20230408144928777"></p>
<h3 id="npm-基本使用"><a href="#npm-基本使用" class="headerlink" title="npm 基本使用"></a><strong>npm</strong> <strong>基本使用</strong></h3><p><strong>初始化</strong></p>
<p>创建一个空目录，然后以此目录作为工作目录 启动命令行工具 ，执行 <strong>npm init</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230408145032414.png" alt="image-20230408145032414"></p>
<p><strong>npm init</strong> 命令的作用是将文件夹初始化为一个『包』， 交互式创建 <strong>package.json</strong> 文件</p>
<p><strong>package.json</strong> 是包的配置文件，每个包都必须要有 <strong>package.json</strong></p>
<p><strong>package.json</strong> 内容示例：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;01_npm&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>属性翻译</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1-npm&quot;</span><span class="punctuation">,</span> #包的名字</span><br><span class="line"><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span> #包的版本</span><br><span class="line"><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span> #包的描述</span><br><span class="line"><span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span> #包的入口文件</span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> #脚本配置</span><br><span class="line"><span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span> #作者</span><br><span class="line"><span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span> #开源证书</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>初始化的过程中还有一些注意事项：</strong></p>
<p><em>1. package name ( 包名 ) 不能使用中文、大写，默认值是 文件夹的名称 ，所以文件夹名称也不</em></p>
<p><em>能使用中文和大写</em></p>
<p><em>2. version ( 版本号 )要求 x.x.x 的形式定义， x 必须是数字，默认值是 1.0.0</em></p>
<p><em>3. ISC 证书与 MIT 证书功能上是相同的，关于开源证书扩展阅读<strong><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/bl">http://www.ruanyifeng.com/bl</a></strong></em></p>
<p><strong><em>og/2011/05/how_to_choose_free_software_licenses.html</em></strong></p>
<p><em>4. package.json 可以手动创建与修改</em></p>
<p><em>5. 使用 npm init -y 或者 npm init —yes 极速创建 package.json</em></p>
</blockquote>
<h4 id="搜索包"><a href="#搜索包" class="headerlink" title="搜索包"></a><strong>搜索包</strong></h4><p>搜索包的方式有两种</p>
<ol>
<li><p>命令行 『npm s/search 关键字』</p>
</li>
<li><p>网站搜索 网址是 <a target="_blank" rel="noopener" href="https://www.npmjs.com/">https://www.npmjs.com/</a></p>
</li>
</ol>
<h4 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a><strong>下载安装包</strong></h4><p>我们可以通过 <strong>npm install</strong> 和 <strong>npm i</strong> 命令安装包</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 格式</span><br><span class="line">npm install &lt;包名&gt;</span><br><span class="line">npm i &lt;包名&gt;</span><br><span class="line"># 示例</span><br><span class="line">npm install uniq</span><br><span class="line">npm i uniq</span><br></pre></td></tr></table></figure>
<p>运行之后文件夹下会增加两个资源</p>
<ul>
<li><strong><em>node_modules</em></strong> 文件夹 存放下载的包</li>
<li><strong><em>package-lock.json</em></strong> 包的锁文件 ，用来锁定包的版本</li>
</ul>
<blockquote>
<p><em>安装 uniq 之后， uniq 就是当前这个包的一个 依赖包 ，有时会简称为 依赖</em></p>
<p><em>比如我们创建一个包名字为 A，A 中安装了包名字是 B，我们就说 B 是 A 的一个依赖包 ，也会说A 依赖 B</em></p>
</blockquote>
<h4 id="require-导入-npm-包基本流程"><a href="#require-导入-npm-包基本流程" class="headerlink" title="require 导入 npm 包基本流程"></a><strong>require</strong> <strong>导入</strong> <strong>npm</strong> <strong>包基本流程</strong></h4><ol>
<li><p>在当前文件夹下 node_modules 中寻找同名的文件夹</p>
</li>
<li><p>在上级目录中下的 node_modules 中寻找同名的文件夹，直至找到磁盘根目录</p>
</li>
</ol>
<h3 id="生产环境与开发环境"><a href="#生产环境与开发环境" class="headerlink" title="生产环境与开发环境"></a><strong>生产环境与开发环境</strong></h3><blockquote>
<p><em>开发环境是程序员 专门用来写代码 的环境，一般是指程序员的电脑，开发环境的项目一般 只能程序员自己访问</em></p>
<p><em>生产环境是项目 代码正式运行 的环境，一般是指正式的服务器电脑，生产环境的项目一般 每个客户都可以访问</em></p>
</blockquote>
<h3 id="生产依赖与开发依赖"><a href="#生产依赖与开发依赖" class="headerlink" title="生产依赖与开发依赖"></a><strong>生产依赖与开发依赖</strong></h3><p>我们可以在安装时设置选项来区分 依赖的类型 ，目前分为两类：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">类型</th>
<th>命令</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">生产依赖</td>
<td>npm i -S uniq/npm i —save uniq</td>
<td>-S  -S 是默认选项 \</td>
<td>包信息保存在 package.json 中 dependencies 属性</td>
</tr>
<tr>
<td style="text-align:center">开发依赖</td>
<td>npm i -D less/npm i —save-dev less</td>
<td>-D 等效于 —save-dev \</td>
<td>包信息保存在 package.json 中 devDependencies 属性</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p><em>举个例子方便大家理解，比如说做蛋炒饭需要 大米 ， 油 ， 葱 ， 鸡蛋 ， 锅 ， 煤气 ， 铲子 等</em></p>
<p><em>其中 锅 ， 煤气 ， 铲子 属于开发依赖，只在制作阶段使用</em></p>
<p><em>而 大米 ， 油 ， 葱 ， 鸡蛋 属于生产依赖，在制作与最终食用都会用到</em></p>
<p><em>所以 开发依赖 是只在开发阶段使用的依赖包，而 生产依赖 是开发阶段和最终上线运行阶段都用到的依赖包</em></p>
</blockquote>
<h3 id="全局安装"><a href="#全局安装" class="headerlink" title="全局安装"></a><strong>全局安装</strong></h3><p>我们可以执行安装选项 -g 进行全局安装</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g nodemon</span><br></pre></td></tr></table></figure>
<p>全局安装完成之后就可以在命令行的任何位置运行 nodemon 命令   该命令的作用是 <strong>自动重启 node</strong> 应用程序</p>
<blockquote>
<p><strong>说明：</strong></p>
<p><em>全局安装的命令不受工作目录位置影响</em></p>
<p><em>可以通过 <strong>npm root -g</strong> 可以查看全局安装包的位置</em></p>
<p><em>不是所有的包都适合全局安装 ， 只有全局类的工具才适合，可以通过 查看包的官方文档来确定安装方式 ，这里先不必太纠结</em></p>
</blockquote>
<h4 id="修改-windows-执行策略"><a href="#修改-windows-执行策略" class="headerlink" title="修改 windows 执行策略"></a><strong>修改</strong> <strong>windows</strong> <strong>执行策略</strong></h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230408150302704.png" alt="image-20230408150302704"></p>
<p>windows 默认不允许 npm 全局命令执行脚本文件，所以需要修改执行策略</p>
<ol>
<li>以 <strong>管理员身份</strong> 打开 powershell 命令行</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230408150340249.png" alt="image-20230408150340249"></p>
<ol>
<li>键入命令 <strong>set-ExecutionPolicy remoteSigned</strong></li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230408150406323.png" alt="image-20230408150406323"></p>
<ol>
<li><p>键入 A 然后敲回车 </p>
</li>
<li><p>如果不生效，可以尝试重启 vscode</p>
</li>
</ol>
<h4 id="环境变量-Path"><a href="#环境变量-Path" class="headerlink" title="环境变量 Path"></a><strong>环境变量</strong> <strong>Path</strong></h4><p><em>Path 是操作系统的一个环境变量，可以设置一些文件夹的路径，在当前工作目录下找不到可执行文件</em></p>
<p><em>时，就会在环境变量 Path 的目录中挨个的查找，如果找到则执行，如果没有找到就会报错</em></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230408150448915.png" alt="image-20230408150448915"></p>
<blockquote>
<p><strong>补充说明：</strong></p>
<p><em>如果希望某个程序在任何工作目录下都能正常运行，就应该将该程序的所在目录配置到环境变量 Path 中</em></p>
<p><em>windows 下查找命令的所在位置</em></p>
<blockquote>
<p><em>cmd 命令行 中执行 where nodemon</em></p>
<p><em>powershell命令行 执行 get-command nodemon</em></p>
</blockquote>
</blockquote>
<h3 id="安装包依赖"><a href="#安装包依赖" class="headerlink" title="安装包依赖"></a><strong>安装包依赖</strong></h3><p>在项目协作中有一个常用的命令就是 npm i ，通过该命令可以依据 package.json 和 package-lock.json 的依赖声明安装项目依赖</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<blockquote>
<p><em>node_modules 文件夹大多数情况都不会存入版本库</em></p>
</blockquote>
<h3 id="安装指定版本的包"><a href="#安装指定版本的包" class="headerlink" title="安装指定版本的包"></a><strong>安装指定版本的包</strong></h3><p>项目中可能会遇到版本不匹配的情况，有时就需要安装指定版本的包，可以使用下面的命令的</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## 格式</span><br><span class="line">npm i &lt;包名@版本号&gt;</span><br><span class="line">## 示例</span><br><span class="line">npm i jquery@<span class="number">1</span>.<span class="number">11</span>.<span class="number">2</span></span><br></pre></td></tr></table></figure>
<h3 id="删除依赖"><a href="#删除依赖" class="headerlink" title="删除依赖"></a><strong>删除依赖</strong></h3><p>项目中可能需要删除某些不需要的包，可以使用下面的命令    </p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 局部删除</span><br><span class="line">npm remove uniq</span><br><span class="line">npm r uniq</span><br><span class="line">## 全局删除</span><br><span class="line">npm remove -g nodemon</span><br></pre></td></tr></table></figure>
<h3 id="配置命令别名"><a href="#配置命令别名" class="headerlink" title="配置命令别名"></a><strong>配置命令别名</strong></h3><p>通过配置命令别名可以更简单的执行命令</p>
<p>配置 <strong>package.json</strong> 中的 <strong>scripts</strong> 属性</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node server.js&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>配置完成之后，可以使用别名执行命令</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run server</span><br><span class="line">npm run <span class="built_in">start</span></span><br></pre></td></tr></table></figure>
<p>不过 start 别名比较特别，使用时可以省略 run</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="built_in">start</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>补充说明：</strong></p>
<p><em>npm start 是项目中常用的一个命令，一般用来启动项目</em></p>
<p><em>npm run 有自动向上级目录查找的特性，跟 require 函数也一样</em></p>
<p><em>对于陌生的项目，我们可以通过查看 scripts 属性来参考项目的一些操作</em></p>
</blockquote>
<h2 id="cnpm"><a href="#cnpm" class="headerlink" title="cnpm"></a><strong>cnpm</strong></h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a><strong>介绍</strong></h3><p><em>cnpm 是一个淘宝构建的 npmjs.com 的完整镜像，也称为『淘宝镜像』，网址<strong><a target="_blank" rel="noopener" href="https://npmmirror.com/">https://npmmirror.com/</a></strong></em></p>
<p><em>cnpm 服务部署在国内 阿里云服务器上 ， 可以提高包的下载速度</em></p>
<p><em>官方也提供了一个全局工具包 cnpm ，操作命令与 npm 大体相同</em></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a><strong>安装</strong></h3><p>我们可以通过 npm 来安装 cnpm 工具</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure>
<h3 id="操作命令"><a href="#操作命令" class="headerlink" title="操作命令"></a><strong>操作命令</strong></h3><div class="table-container">
<table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>初始化</td>
<td>cnpm init / cnpm init</td>
</tr>
<tr>
<td>安装包</td>
<td>cnpm i uniq / cnpm i -S uniq / cnpm i -D uniq / cnpm i -g nodemon</td>
</tr>
<tr>
<td>安装项目依赖</td>
<td>cnpm i</td>
</tr>
<tr>
<td>删除</td>
<td>cnpm r uniq</td>
</tr>
</tbody>
</table>
</div>
<h3 id="npm-配置淘宝镜像"><a href="#npm-配置淘宝镜像" class="headerlink" title="npm 配置淘宝镜像"></a><strong>npm</strong> <strong>配置淘宝镜像</strong></h3><p>用 npm 也可以使用淘宝镜像，配置的方式有两种</p>
<ul>
<li><p><em>直接配置</em></p>
</li>
<li><p><em>工具配置</em></p>
</li>
</ul>
<h4 id="直接配置"><a href="#直接配置" class="headerlink" title="直接配置"></a><strong>直接配置</strong></h4><p>执行如下命令即可完成配置</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure>
<h4 id="工具配置"><a href="#工具配置" class="headerlink" title="工具配置"></a><strong>工具配置</strong></h4><p>使用 nrm 配置 npm 的镜像地址 npm registry manager</p>
<p>安装 nrm</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g nrm</span><br></pre></td></tr></table></figure>
<p>修改镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm use taobao</span><br></pre></td></tr></table></figure>
<p>检查是否配置成功（选做）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config list</span><br></pre></td></tr></table></figure>
<p>检查 registry 地址是否为 <strong><a target="_blank" rel="noopener" href="https://registry.npmmirror.com/">https://registry.npmmirror.com/</a></strong> , 如果 是 则表明成功</p>
<blockquote>
<p><strong>补充说明：</strong></p>
<ol>
<li><em>建议使用第二种方式 进行镜像配置，因为后续修改起来会比较方便</em></li>
<li><em>虽然 cnpm 可以提高速度，但是 npm 也可以通过淘宝镜像进行加速，所以 npm 的使用率还是高于 cnpm</em></li>
</ol>
</blockquote>
<h2 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a><strong>yarn</strong></h2><h3 id="yarn-介绍"><a href="#yarn-介绍" class="headerlink" title="yarn 介绍"></a><strong>yarn</strong> <strong>介绍</strong></h3><p>yarn 是由 Facebook 在 2016 年推出的新的 Javascript 包管理工具，官方网址：<strong><a target="_blank" rel="noopener" href="https://yarnpkg.com/">https://yarnpkg.com/</a></strong></p>
<h3 id="yarn-特点"><a href="#yarn-特点" class="headerlink" title="yarn 特点"></a><strong>yarn</strong> <strong>特点</strong></h3><p>yarn 官方宣称的一些特点</p>
<blockquote>
<p><strong>*速度超快</strong>：yarn 缓存了每个下载过的包，所以再次使用时无需重复下载。 同时利用并行下载以最大化资源利用率，因此安装速度更快*</p>
<p><strong>*超级安全</strong>：在执行代码之前，yarn 会通过算法校验每个安装包的完整性*</p>
<p><strong>*超级可靠</strong>：使用详细、简洁的锁文件格式和明确的安装算法，yarn 能够保证在不同系统上无差异的工作*</p>
</blockquote>
<h3 id="yarn-安装"><a href="#yarn-安装" class="headerlink" title="yarn 安装"></a><strong>yarn</strong> <strong>安装</strong></h3><p>我们可以使用 npm 安装 yarn</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g yarn</span><br></pre></td></tr></table></figure>
<h3 id="yarn-常用命令"><a href="#yarn-常用命令" class="headerlink" title="yarn 常用命令"></a><strong>yarn</strong> <strong>常用命令</strong></h3><div class="table-container">
<table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>初始化</td>
<td>yarn init / yarn init -y</td>
</tr>
<tr>
<td>安装包</td>
<td>yarn add uniq 生产依赖 / yarn add less —dev 开发依赖 / yarn global add nodemon 全局安装</td>
</tr>
<tr>
<td>删除包</td>
<td>yarn remove uniq 删除项目依赖包 / yarn global remove nodemon 全局删除包</td>
</tr>
<tr>
<td>安装项目依赖</td>
<td>yarn</td>
</tr>
<tr>
<td>运行命令别名</td>
<td>yarn &lt;别名&gt; # 不需要添加 run</td>
</tr>
</tbody>
</table>
</div>
<h3 id="yarn-配置淘宝镜像"><a href="#yarn-配置淘宝镜像" class="headerlink" title="yarn 配置淘宝镜像"></a><strong>yarn</strong> <strong>配置淘宝镜像</strong></h3><p>可以通过如下命令配置淘宝镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn config set registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure>
<p>可以通过 yarn config list 查看 yarn 的配置项</p>
<h3 id="npm-和-yarn-选择"><a href="#npm-和-yarn-选择" class="headerlink" title="npm 和 yarn 选择"></a><strong>npm</strong> <strong>和</strong> <strong>yarn</strong> <strong>选择</strong></h3><p>大家可以根据不同的场景进行选择</p>
<ol>
<li><strong><em>个人项目</em></strong></li>
</ol>
<p><em>如果是个人项目， 哪个工具都可以 ，可以根据自己的喜好来选择</em></p>
<ol>
<li><strong><em>公司项目</em></strong></li>
</ol>
<p><em>如果是公司要根据项目代码来选择，可以 通过锁文件判断 项目的包管理工具</em></p>
<p>​        <em>npm 的锁文件为 package-lock.json</em></p>
<p>​        <em>yarn 的锁文件为 yarn.lock</em></p>
<blockquote>
<p><strong><em>包管理工具 不要混着用，切记，切记，切记</em></strong></p>
</blockquote>
<h2 id="管理发布包"><a href="#管理发布包" class="headerlink" title="管理发布包"></a><strong>管理发布包</strong></h2><h3 id="创建与发布"><a href="#创建与发布" class="headerlink" title="创建与发布"></a><strong>创建与发布</strong></h3><p>我们可以将自己开发的工具包发布到 npm 服务上，方便自己和其他开发者使用，操作步骤如下：</p>
<ol>
<li><p><em>创建文件夹，并创建文件 index.js， 在文件中声明函数，使用 module.exports 暴露</em></p>
</li>
<li><p><em>npm 初始化工具包，package.json 填写包的信息 (包的名字是唯一的)</em></p>
</li>
<li><p><em>注册账号 <strong><a target="_blank" rel="noopener" href="https://www.npmjs.com/signup">https://www.npmjs.com/signup</a></strong></em></p>
</li>
<li><p><em>激活账号 （ 一定要激活账号 ）</em></p>
</li>
<li><p><em>修改为官方的官方镜像 (命令行中运行 nrm use npm )</em></p>
</li>
<li><p><em>命令行下 npm login 填写相关用户信息</em></p>
</li>
<li><p><em>命令行下 npm publish 提交包 👌</em></p>
</li>
</ol>
<h3 id="更新包"><a href="#更新包" class="headerlink" title="更新包"></a><strong>更新包</strong></h3><p>后续可以对自己发布的包进行更新，操作步骤如下</p>
<ol>
<li><p><em>更新包中的代码</em></p>
</li>
<li><p><em>测试代码是否可用</em></p>
</li>
<li><p><em>修改 package.json 中的版本号</em></p>
</li>
<li><p><em>发布更新</em></p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure>
<h3 id="删除包"><a href="#删除包" class="headerlink" title="删除包"></a><strong>删除包</strong></h3><p>执行如下命令删除包</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm unpublish --force</span><br></pre></td></tr></table></figure>
<blockquote>
<p>删除包需要满足一定的条件，<strong><a target="_blank" rel="noopener" href="https://docs.npmjs.com/policies/unpublish">https://docs.npmjs.com/policies/unpublish</a></strong></p>
<p><strong><em>1.你是包的作者</em></strong></p>
<p><strong><em>2.发布小于 24 小时</em></strong></p>
<p><strong><em>3.大于 24 小时后，没有其他包依赖，并且每周小于 300 下载量，并且只有一个维护者</em></strong></p>
</blockquote>
<h2 id="扩展内容"><a href="#扩展内容" class="headerlink" title="扩展内容"></a><strong>扩展内容</strong></h2><p>在很多语言中都有包管理工具，比如：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>语言</th>
<th>包管理工具</th>
</tr>
</thead>
<tbody>
<tr>
<td>PHP</td>
<td>composer</td>
</tr>
<tr>
<td>Python</td>
<td>pip</td>
</tr>
<tr>
<td>Java</td>
<td>maven</td>
</tr>
<tr>
<td>Go</td>
<td>go mod</td>
</tr>
<tr>
<td>JavaScript</td>
<td>npm/yarn/cnpm/othe</td>
</tr>
</tbody>
</table>
</div>
<p>除了编程语言领域有包管理工具之外，操作系统层面也存在包管理工具，不过这个包指的是『 软件包 』</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>操作系统</th>
<th>包管理工具</th>
<th>网址</th>
</tr>
</thead>
<tbody>
<tr>
<td>Centos</td>
<td>yum</td>
<td><strong><a target="_blank" rel="noopener" href="https://packages.debian.org/stable/">https://packages.debian.org/stable/</a></strong></td>
</tr>
<tr>
<td>Ubuntu</td>
<td>apt</td>
<td><strong><a target="_blank" rel="noopener" href="https://packages.ubuntu.com/">https://packages.ubuntu.com/</a></strong></td>
</tr>
<tr>
<td>MacOS</td>
<td>homebrew</td>
<td><strong><a target="_blank" rel="noopener" href="https://brew.sh/">https://brew.sh/</a></strong></td>
</tr>
<tr>
<td>Windows</td>
<td>chocolatey</td>
<td><strong><a target="_blank" rel="noopener" href="https://chocolatey.org/">https://chocolatey.org/</a></strong></td>
</tr>
</tbody>
</table>
</div>
<h1 id="NVM"><a href="#NVM" class="headerlink" title="NVM"></a>NVM</h1><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><p>nvm 全称 Node Version Manager 顾名思义它是用来管理 node 版本的工具，方便切换不同版本的Node.js</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a><strong>使用</strong></h3><p>nvm 的使用非常的简单，跟 npm 的使用方法类似</p>
<h4 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a><strong>下载安装</strong></h4><p>首先先下载 nvm，下载地址 <strong><a target="_blank" rel="noopener" href="https://github.com/coreybutler/nvm-windows/releases">https://github.com/coreybutler/nvm-windows/releases</a></strong>，选择 nvm-setup.exe 下载即可</p>
<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a><strong>常用命令</strong></h4><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>nvm list available</td>
<td>显示所有可以下载的 Node.js 版本</td>
</tr>
<tr>
<td>nvm list</td>
<td>显示已安装的版本</td>
</tr>
<tr>
<td>nvm install 18.12.1</td>
<td>安装 18.12.1 版本的 Node.js</td>
</tr>
<tr>
<td>nvm install latest</td>
<td>安装最新版的 Node.js</td>
</tr>
<tr>
<td>nvm uninstall 18.12.1</td>
<td>删除某个版本的 Node.js</td>
</tr>
<tr>
<td>nvm use 18.12.1</td>
<td>切换 18.12.1 的 Node.js</td>
</tr>
</tbody>
</table>
</div>
<h1 id="Express-介绍"><a href="#Express-介绍" class="headerlink" title="Express 介绍"></a><strong>Express</strong> <strong>介绍</strong></h1><p>express 是一个基于 Node.js 平台的极简、灵活的 WEB 应用开发框架，官方网址：<strong><a target="_blank" rel="noopener" href="https://www.expressjs.com.cn/">https://www.expressjs.com.cn/</a></strong></p>
<p>简单来说，express 是一个封装好的工具包，封装了很多功能，便于我们开发 WEB 应用（HTTP 服务）</p>
<h2 id="express-使用"><a href="#express-使用" class="headerlink" title="express 使用"></a><strong>express</strong> <strong>使用</strong></h2><h3 id="express-下载"><a href="#express-下载" class="headerlink" title="express 下载"></a><strong>express</strong> <strong>下载</strong></h3><p>express 本身是一个 npm 包，所以可以通过 npm 安装</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br><span class="line">    npm i express</span><br></pre></td></tr></table></figure>
<h3 id="express-初体验"><a href="#express-初体验" class="headerlink" title="express 初体验"></a><strong>express</strong> <strong>初体验</strong></h3><p>可以按照这个步骤进行操作：</p>
<p>1.创建 JS 文件，键入如下代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//2. 创建应用对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//3. 创建路由规则</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/home&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">res.<span class="title function_">end</span>(<span class="string">&#x27;hello express server&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//4. 监听端口 启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口监听为 3000...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>2.命令行下执行该脚本</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node &lt;文件名&gt;</span><br><span class="line"># 或者</span><br><span class="line">nodemon &lt;文件名&gt;</span><br></pre></td></tr></table></figure>
<p>3.然后在浏览器就可以访问 <a target="_blank" rel="noopener" href="http://127.0.0.1:3000/home">http://127.0.0.1:3000/home</a> </p>
<h2 id="express-路由"><a href="#express-路由" class="headerlink" title="express 路由"></a><strong>express</strong> <strong>路由</strong></h2><h4 id="什么是路由"><a href="#什么是路由" class="headerlink" title="什么是路由"></a><strong>什么是路由</strong></h4><p>官方定义： <strong>路由确定了应用程序如何响应客户端对特定端点的请求</strong></p>
<h4 id="路由的使用"><a href="#路由的使用" class="headerlink" title="路由的使用"></a><strong>路由的使用</strong></h4><p><em>一个路由的组成有 请求方法 ， 路径 和 回调函数 组成</em></p>
<p>express 中提供了一系列方法，可以很方便的使用路由，使用格式如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.&lt;method&gt;(path，callback)</span><br></pre></td></tr></table></figure>
<p>代码示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//创建应用对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//创建 get 路由</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/home&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;网站首页&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//首页路由</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;我才是真正的首页&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//创建 post 路由</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;登录成功&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//匹配所有的请求方法</span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/search&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;1 秒钟为您找到相关结果约 100,000,000 个&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&quot;*&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//监听端口 启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口监听为 3000&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="获取请求参数"><a href="#获取请求参数" class="headerlink" title="获取请求参数"></a><strong>获取请求参数</strong></h4><p>express 框架封装了一些 API 来方便获取请求报文中的数据，并且兼容原生 HTTP 模块的获取方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//创建应用对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//获取请求的路由规则</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/request&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//1. 获取报文的方式与原生 HTTP 获取方式是兼容的</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">method</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">url</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">httpVersion</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">headers</span>);</span><br><span class="line"><span class="comment">//2. express 独有的获取报文的方式</span></span><br><span class="line"><span class="comment">//获取查询字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">query</span>); <span class="comment">// 『相对重要』</span></span><br><span class="line"><span class="comment">// 获取指定的请求头</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="title function_">get</span>(<span class="string">&#x27;host&#x27;</span>));</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;请求报文的获取&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;启动成功....&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="获取路由参数"><a href="#获取路由参数" class="headerlink" title="获取路由参数"></a><strong>获取路由参数</strong></h4><p>路由参数指的是 URL 路径中的参数（数据）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/:id.html&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;商品详情, 商品 id 为&#x27;</span> + req.<span class="property">params</span>.<span class="property">id</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="express-响应设置"><a href="#express-响应设置" class="headerlink" title="express 响应设置"></a><strong>express</strong> <strong>响应设置</strong></h2><p>express 框架封装了一些 API 来方便给客户端响应数据，并且兼容原生 HTTP 模块的获取方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取请求的路由规则</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/response&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//1. express 中设置响应的方式兼容 HTTP 模块的方式</span></span><br><span class="line">res.<span class="property">statusCode</span> = <span class="number">404</span>;</span><br><span class="line">res.<span class="property">statusMessage</span> = <span class="string">&#x27;xxx&#x27;</span>;</span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;xyz&#x27;</span>);</span><br><span class="line">res.<span class="title function_">write</span>(<span class="string">&#x27;响应体&#x27;</span>);</span><br><span class="line">res.<span class="title function_">end</span>(<span class="string">&#x27;xxx&#x27;</span>);</span><br><span class="line"><span class="comment">//2. express 的响应方法</span></span><br><span class="line">res.<span class="title function_">status</span>(<span class="number">500</span>); <span class="comment">//设置响应状态码</span></span><br><span class="line">res.<span class="title function_">set</span>(<span class="string">&#x27;xxx&#x27;</span>,<span class="string">&#x27;yyy&#x27;</span>);<span class="comment">//设置响应头</span></span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;中文响应不乱码&#x27;</span>);<span class="comment">//设置响应体</span></span><br><span class="line"><span class="comment">//连贯操作</span></span><br><span class="line">res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">set</span>(<span class="string">&#x27;xxx&#x27;</span>,<span class="string">&#x27;yyy&#x27;</span>).<span class="title function_">send</span>(<span class="string">&#x27;你好朋友&#x27;</span>)</span><br><span class="line"><span class="comment">//3. 其他响应</span></span><br><span class="line">res.<span class="title function_">redirect</span>(<span class="string">&#x27;http://atguigu.com&#x27;</span>)<span class="comment">//重定向</span></span><br><span class="line">res.<span class="title function_">download</span>(<span class="string">&#x27;./package.json&#x27;</span>);<span class="comment">//下载响应</span></span><br><span class="line">res.<span class="title function_">json</span>();<span class="comment">//响应 JSON</span></span><br><span class="line">res.<span class="title function_">sendFile</span>(__dirname + <span class="string">&#x27;/home.html&#x27;</span>) <span class="comment">//响应文件内容</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="express-中间件"><a href="#express-中间件" class="headerlink" title="express 中间件"></a><strong>express</strong> <strong>中间件</strong></h2><h3 id="什么是中间件"><a href="#什么是中间件" class="headerlink" title="什么是中间件"></a><strong>什么是中间件</strong></h3><p><strong>中间件（Middleware）本质是一个回调函数</strong></p>
<p><strong>中间件函数</strong> 可以像路由回调一样访问 <strong>请求对象（request） ， 响应对象（response）</strong></p>
<h3 id="中间件的作用"><a href="#中间件的作用" class="headerlink" title="中间件的作用"></a><strong>中间件的作用</strong></h3><p><em>中间件的作用 就是 使用函数封装公共操作，简化代码</em></p>
<h3 id="中间件的类型"><a href="#中间件的类型" class="headerlink" title="中间件的类型"></a><strong>中间件的类型</strong></h3><ul>
<li>全局中间件</li>
<li>路由中间件</li>
</ul>
<h4 id="定义全局中间件"><a href="#定义全局中间件" class="headerlink" title="定义全局中间件"></a><strong>定义全局中间件</strong></h4><p><em>每一个请求 到达服务端之后 都会执行全局中间件函数</em></p>
<p>声明中间件函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> recordMiddleware = <span class="keyword">function</span>(<span class="params">request,response,next</span>)&#123;</span><br><span class="line"><span class="comment">//实现功能代码</span></span><br><span class="line"><span class="comment">//.....</span></span><br><span class="line"><span class="comment">//执行next函数(当如果希望执行完中间件函数之后，仍然继续执行路由中的回调函数，必须调用next)</span></span><br><span class="line"><span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230409171730756.png" alt="image-20230409171730756"></p>
<p>应用中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(recordMiddleware);</span><br></pre></td></tr></table></figure>
<p>声明时可以直接将匿名函数传递给 use</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">request, response, next</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;定义第一个中间件&#x27;</span>);</span><br><span class="line"><span class="title function_">next</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="多个全局中间件"><a href="#多个全局中间件" class="headerlink" title="多个全局中间件"></a><strong>多个全局中间件</strong></h4><p>express 允许使用 app.use() 定义多个全局中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">request, response, next</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;定义第一个中间件&#x27;</span>);</span><br><span class="line"><span class="title function_">next</span>();</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">request, response, next</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;定义第二个中间件&#x27;</span>);</span><br><span class="line"><span class="title function_">next</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="定义路由中间件"><a href="#定义路由中间件" class="headerlink" title="定义路由中间件"></a><strong>定义路由中间件</strong></h4><p>如果 <strong>只需要对某一些路由进行功能封装</strong> ，则就需要路由中间件</p>
<p>调用格式如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/路径&#x27;</span>,<span class="string">`中间件函数`</span>,<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/路径&#x27;</span>,<span class="string">`中间件函数1`</span>,<span class="string">`中间件函数2`</span>,<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="静态资源中间件"><a href="#静态资源中间件" class="headerlink" title="静态资源中间件"></a><strong>静态资源中间件</strong></h3><p>express 内置处理静态资源的中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入express框架</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//静态资源中间件的设置，将当前文件夹下的public目录作为网站的根目录</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;./public&#x27;</span>)); <span class="comment">//当然这个目录中都是一些静态资源</span></span><br><span class="line"><span class="comment">//如果访问的内容经常变化，还是需要设置路由</span></span><br><span class="line"><span class="comment">//但是，在这里有一个问题，如果public目录下有index.html文件，单独也有index.html的路由，</span></span><br><span class="line"><span class="comment">//则谁书写在前，优先执行谁</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/index.html&#x27;</span>,<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">respsonse.<span class="title function_">send</span>(<span class="string">&#x27;首页&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3000 端口启动....&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意事项:</strong></p>
<ol>
<li><p><strong><em>index.html 文件为默认打开的资源</em></strong></p>
</li>
<li><p><strong><em>如果静态资源与路由规则同时匹配，谁先匹配谁就响应</em></strong></p>
</li>
<li><p><strong><em>路由响应动态资源，静态资源中间件响应静态资源</em></strong></p>
</li>
</ol>
</blockquote>
<h3 id="获取请求体数据-body-parser"><a href="#获取请求体数据-body-parser" class="headerlink" title="获取请求体数据 body-parser"></a><strong>获取请求体数据</strong> <strong>body-parser</strong></h3><p>express 可以使用 body-parser 包处理请求体</p>
<p>第一步：安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i body-parser</span><br></pre></td></tr></table></figure>
<p>第二步：导入 body-parser 包</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>第三步：获取中间件函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//处理 querystring 格式的请求体</span></span><br><span class="line"><span class="keyword">let</span> urlParser = bodyParser.<span class="title function_">urlencoded</span>(&#123;<span class="attr">extended</span>:<span class="literal">false</span>&#125;));</span><br><span class="line"><span class="comment">//处理 JSON 格式的请求体</span></span><br><span class="line"><span class="keyword">let</span> jsonParser = bodyParser.<span class="title function_">json</span>()</span><br></pre></td></tr></table></figure>
<p>第四步：设置路由中间件，然后使用 request.body 来获取请求体数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, urlParser, <span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//获取请求体数据</span></span><br><span class="line"><span class="comment">//console.log(request.body);</span></span><br><span class="line"><span class="comment">//用户名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">body</span>.<span class="property">username</span>);</span><br><span class="line"><span class="comment">//密码</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">body</span>.<span class="property">userpass</span>);</span><br><span class="line">response.<span class="title function_">send</span>(<span class="string">&#x27;获取请求体数据&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>获取到的请求体数据：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Object</span>: <span class="type">null</span> <span class="type">prototype</span>] &#123; username: <span class="string">&#x27;admin&#x27;</span>, userpass: <span class="string">&#x27;123456&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Router"><a href="#Router" class="headerlink" title="Router"></a><strong>Router</strong></h2><h3 id="什么是-Router"><a href="#什么是-Router" class="headerlink" title="什么是 Router"></a><strong>什么是</strong> <strong>Router</strong></h3><p>express 中的 Router 是一个完整的中间件和路由系统，可以看做是一个小型的 app 对象。</p>
<h3 id="Router-作用"><a href="#Router-作用" class="headerlink" title="Router 作用"></a><strong>Router</strong> <strong>作用</strong></h3><p>对路由进行模块化，更好的管理路由</p>
<h3 id="Router-使用"><a href="#Router-使用" class="headerlink" title="Router 使用"></a><strong>Router</strong> <strong>使用</strong></h3><p>创建独立的 JS 文件（homeRouter.js）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.导入express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">//2.创建路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>()</span><br><span class="line"><span class="comment">//3.创建路由规则</span></span><br><span class="line"><span class="comment">//创建路由</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/home&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;前台首页&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/search&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Search首页&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//4.暴露router</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>= router;</span><br></pre></td></tr></table></figure>
<p>主文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//5.引入子路由文件</span></span><br><span class="line"><span class="keyword">const</span> homeRouter = <span class="built_in">require</span>(<span class="string">&#x27;./routes/homeRouter&#x27;</span>);</span><br><span class="line"><span class="comment">//6.设置和使用中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(homeRouter);</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3000 端口启动....&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="EJS-模板引擎"><a href="#EJS-模板引擎" class="headerlink" title="EJS 模板引擎"></a><strong>EJS</strong> <strong>模板引擎</strong></h1><h3 id="什么是模板引擎"><a href="#什么是模板引擎" class="headerlink" title="什么是模板引擎"></a><strong>什么是模板引擎</strong></h3><p>模板引擎是分离 用户界面和业务数据 的一种技术</p>
<h3 id="什么是-EJS"><a href="#什么是-EJS" class="headerlink" title="什么是 EJS"></a><strong>什么是</strong> <strong>EJS</strong></h3><p>EJS 是一个高效的 Javascript 的模板引擎</p>
<p>官网: <strong><a target="_blank" rel="noopener" href="https://ejs.co/">https://ejs.co/</a></strong></p>
<p>中文站：<strong><a target="_blank" rel="noopener" href="https://ejs.bootcss.com/">https://ejs.bootcss.com/</a></strong></p>
<h3 id="EJS-初体验"><a href="#EJS-初体验" class="headerlink" title="EJS 初体验"></a><strong>EJS</strong> <strong>初体验</strong></h3><p>下载安装EJS</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i ejs --save</span><br></pre></td></tr></table></figure>
<p>代码示例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.引入ejs</span></span><br><span class="line"><span class="keyword">const</span> ejs = <span class="built_in">require</span>(<span class="string">&#x27;ejs&#x27;</span>);</span><br><span class="line"><span class="comment">//2.定义数据</span></span><br><span class="line"><span class="keyword">let</span> person = [<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;王二麻子&#x27;</span>];</span><br><span class="line"><span class="comment">//3.ejs解析模板返回结构</span></span><br><span class="line"><span class="comment">//&lt;%= %&gt; 是ejs解析内容的标记，作用是输出当前表达式的执行结构</span></span><br><span class="line"><span class="keyword">let</span> html = ejs.<span class="title function_">render</span>(‘&lt;%= person.<span class="title function_">join</span>(<span class="string">&quot;,&quot;</span>) %&gt;’, &#123;<span class="attr">person</span>:person&#125;);</span><br><span class="line"><span class="comment">//4.输出结果</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(html);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//第二个</span></span><br><span class="line"><span class="comment">//数组</span></span><br><span class="line"><span class="keyword">const</span> xiyou = [<span class="string">&#x27;luomu&#x27;</span>, <span class="string">&#x27;luomu777&#x27;</span>, <span class="string">&#x27;relife&#x27;</span>, <span class="string">&#x27;relife777&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> ejs = <span class="built_in">require</span>(<span class="string">&#x27;ejs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//原生js实现</span></span><br><span class="line"><span class="comment">// let str = &#x27;&lt;ul&gt;&#x27;</span></span><br><span class="line"><span class="comment">// xiyou.forEach(item =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     str += `&lt;li&gt;$&#123;item&#125;&lt;/li&gt;`</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">//闭合ul</span></span><br><span class="line"><span class="comment">// str += &#x27;&lt;/ul&gt;&#x27;</span></span><br><span class="line"><span class="comment">// console.log(str);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//EJS实现</span></span><br><span class="line"><span class="keyword">let</span> html = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./2.html&#x27;</span>).<span class="title function_">toString</span>()</span><br><span class="line"><span class="keyword">let</span> result = ejs.<span class="title function_">render</span>(html, &#123; <span class="attr">xiyou</span>: xiyou &#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>命令行下运行</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="literal">--</span> 第二个 <span class="literal">--</span>&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http<span class="literal">-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line"></span><br><span class="line">            &lt;li&gt;luomu&lt;/li&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">            &lt;li&gt;luomu777&lt;/li&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">            &lt;li&gt;relife&lt;/li&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">            &lt;li&gt;relife777&lt;/li&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="EJS-常用语法"><a href="#EJS-常用语法" class="headerlink" title="EJS 常用语法"></a><strong>EJS</strong> <strong>常用语法</strong></h3><p>执行JS代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% code %&gt;</span><br></pre></td></tr></table></figure>
<p>输出转义的数据到模板上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= code %&gt;</span><br></pre></td></tr></table></figure>
<p>输出非转义的数据到模板上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- code %&gt;</span><br></pre></td></tr></table></figure>
<h1 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a><strong>MongoDB</strong></h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a><strong>简介</strong></h2><h3 id="Mongodb-是什么"><a href="#Mongodb-是什么" class="headerlink" title="Mongodb 是什么"></a><strong>Mongodb</strong> <strong>是什么</strong></h3><p>MongoDB 是一个基于分布式文件存储的数据库，官方地址 <strong><a target="_blank" rel="noopener" href="https://www.mongodb.com/">https://www.mongodb.com/</a></strong></p>
<h3 id="数据库是什么"><a href="#数据库是什么" class="headerlink" title="数据库是什么"></a><strong>数据库是什么</strong></h3><p>数据库（DataBase）是按照数据结构来组织、存储和管理数据的 应用程序</p>
<h3 id="数据库的作用"><a href="#数据库的作用" class="headerlink" title="数据库的作用"></a><strong>数据库的作用</strong></h3><p>数据库的主要作用就是 管理数据 ，对数据进行 增（c）、删（d）、改（u）、查（r）</p>
<h3 id="数据库管理数据的特点"><a href="#数据库管理数据的特点" class="headerlink" title="数据库管理数据的特点"></a><strong>数据库管理数据的特点</strong></h3><p>相比于纯文件管理数据，数据库管理数据有如下特点：</p>
<ol>
<li><p>速度更快</p>
</li>
<li><p>扩展性更强</p>
</li>
<li><p>安全性更强</p>
</li>
</ol>
<h3 id="为什么选择-Mongodb"><a href="#为什么选择-Mongodb" class="headerlink" title="为什么选择 Mongodb"></a><strong>为什么选择</strong> <strong>Mongodb</strong></h3><p>操作语法与 JavaScript 类似，容易上手，学习成本低</p>
<h2 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a><strong>核心概念</strong></h2><p>Mongodb 中有三个重要概念需要掌握</p>
<ul>
<li>数据库（database） 数据库是一个数据仓库，数据库服务下可以创建很多数据库，数据库中可以存放很多集合</li>
<li>集合（collection） 集合类似于 JS 中的数组，在集合中可以存放很多文档</li>
<li>文档（document） 文档是数据库中的最小单位，类似于 JS 中的对象</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230410215016617.png" alt="image-20230410215016617"></p>
<p>JSON 文件示例：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;accounts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3-YLju5f3&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;买电脑&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;time&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2023-02-08&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-1&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;account&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5500&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;remarks&quot;</span><span class="punctuation">:</span> <span class="string">&quot;为了上网课&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3-YLju5f4&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请女朋友吃饭&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;time&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2023-02-08&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-1&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;account&quot;</span><span class="punctuation">:</span> <span class="string">&quot;214&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;remarks&quot;</span><span class="punctuation">:</span> <span class="string">&quot;情人节聚餐&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mRQiD4s3K&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;发工资&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;time&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2023-02-19&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;account&quot;</span><span class="punctuation">:</span> <span class="string">&quot;4396&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;remarks&quot;</span><span class="punctuation">:</span> <span class="string">&quot;终于发工资啦!~~&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;users&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zhangsan&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">18</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lisi&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">20</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wangwu&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">22</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>大家可以通过 JSON 文件来理解 Mongodb 中的概念</p>
<blockquote>
<p><strong><em>一个 JSON 文件 好比是一个 数据库 ，一个 Mongodb 服务下可以有 N 个数据库</em></strong></p>
<p><strong><em>JSON 文件中的 一级属性的数组值 好比是 集合</em></strong></p>
<p><strong><em>数组中的对象好比是 文档</em></strong></p>
<p><strong><em>对象中的属性有时也称之为 字段</em></strong></p>
<blockquote>
<p>一般情况下</p>
<p><strong><em>一个项目使用一个数据库</em></strong></p>
<p><strong><em>一个集合会存储同一种类型的数据</em></strong></p>
</blockquote>
</blockquote>
<h2 id="下载安装与启动"><a href="#下载安装与启动" class="headerlink" title="下载安装与启动"></a><strong>下载安装与启动</strong></h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45790877/article/details/129286309">(10条消息) MongoDB安装配置教程（详细版）<em>mongodb怎么安装</em>橘子奶盖”的博客-CSDN博客</a></p>
<blockquote>
<p><strong>注意：</strong></p>
<p><strong>为了方便后续方便使用 mongod 命令，可以将 bin 目录配置到环境变量 Path 中</strong></p>
<p><strong>千万不要选中服务端窗口的内容 ，选中会停止服务，可以 敲回车 取消选中</strong></p>
</blockquote>
<h2 id="命令行交互"><a href="#命令行交互" class="headerlink" title="命令行交互"></a><strong>命令行交互</strong></h2><p>命令行交互一般是学习数据库的第一步，不过这些命令在后续用的比较少，所以大家了解即可</p>
<h3 id="数据库命令"><a href="#数据库命令" class="headerlink" title="数据库命令"></a><strong>数据库命令</strong></h3><p>显示所有的数据库</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show dbs</span><br></pre></td></tr></table></figure>
<p>切换到指定的数据库，如果数据库不存在会自动创建数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 数据库名</span><br></pre></td></tr></table></figure>
<p>显示当前所在的数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db</span><br></pre></td></tr></table></figure>
<p>删除当前数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use 库名</span><br><span class="line">db.dropDatabase()</span><br></pre></td></tr></table></figure>
<h3 id="集合命令"><a href="#集合命令" class="headerlink" title="集合命令"></a><strong>集合命令</strong></h3><p>创建集合</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.createCollection(&#x27;集合名称&#x27;)</span><br></pre></td></tr></table></figure>
<p>显示当前数据库中的所有集合</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show collections</span><br></pre></td></tr></table></figure>
<p>删除某个集合</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.drop()</span><br></pre></td></tr></table></figure>
<p>重命名集合</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.renameCollection(&#x27;newName&#x27;)</span><br></pre></td></tr></table></figure>
<h3 id="文档命令"><a href="#文档命令" class="headerlink" title="文档命令"></a><strong>文档命令</strong></h3><p>插入文档</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.insert(文档对象);</span><br></pre></td></tr></table></figure>
<p>查询文档</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.find(查询条件)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><em>_id 是 mongodb 自动生成的唯一编号，用来唯一标识文档</em></strong></p>
</blockquote>
<p>更新文档</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.update(查询条件,新的文档)</span><br><span class="line">db.集合名.update(&#123;name:&#x27;张三&#x27;&#125;,&#123;$set:&#123;age:19&#125;&#125;)</span><br></pre></td></tr></table></figure>
<p>删除文档</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.remove(查询条件)</span><br></pre></td></tr></table></figure>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a><strong>应用场景</strong></h3><h5 id="新增"><a href="#新增" class="headerlink" title="新增"></a>新增</h5><blockquote>
<p><strong>用户注册</strong></p>
<p><strong>发布视频</strong></p>
<p><strong>发布商品</strong></p>
<p><strong>发朋友圈</strong></p>
<p><strong>发评论</strong></p>
<p><strong>发微博</strong></p>
<p><strong>发弹幕</strong></p>
<p><strong>…….</strong></p>
</blockquote>
<h5 id="删除"><a href="#删除" class="headerlink" title="删除"></a><strong>删除</strong></h5><blockquote>
<p><strong>删除评论</strong></p>
<p><strong>删除商品</strong></p>
<p><strong>删除文章</strong></p>
<p><strong>删除视频</strong></p>
<p><strong>删除微博</strong></p>
<p><strong>……</strong></p>
</blockquote>
<h5 id="更新"><a href="#更新" class="headerlink" title="更新"></a><strong>更新</strong></h5><blockquote>
<p><strong>更新个人信息</strong></p>
<p><strong>修改商品价格</strong></p>
<p><strong>修改文章内容</strong></p>
<p><strong>……</strong></p>
</blockquote>
<h5 id="查询"><a href="#查询" class="headerlink" title="查询"></a><strong>查询</strong></h5><blockquote>
<p><strong>商品列表</strong></p>
<p><strong>视频列表</strong></p>
<p><strong>朋友圈列表</strong></p>
<p><strong>微博列表</strong></p>
<p><strong>搜索功能</strong></p>
<p><strong>……</strong></p>
</blockquote>
<h3 id="Mongoose"><a href="#Mongoose" class="headerlink" title="Mongoose"></a><strong>Mongoose</strong></h3><h5 id="介绍-2"><a href="#介绍-2" class="headerlink" title="介绍"></a><strong>介绍</strong></h5><p>Mongoose 是一个对象文档模型库，官网 <strong><a target="_blank" rel="noopener" href="http://www.mongoosejs.net/">http://www.mongoosejs.net/</a></strong></p>
<h5 id="作用"><a href="#作用" class="headerlink" title="作用"></a><strong>作用</strong></h5><p>方便使用代码操作 mongodb 数据库</p>
<h5 id="使用流程"><a href="#使用流程" class="headerlink" title="使用流程"></a><strong>使用流程</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.安装mongoose</span></span><br><span class="line"><span class="comment">//2.导入mongoose</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>)</span><br><span class="line"><span class="comment">//3.连接mongodb服务</span></span><br><span class="line"><span class="comment">//connect连接的意思  relife为数据库的名称</span></span><br><span class="line">mongoose.<span class="title function_">connect</span>(<span class="string">&#x27;mongodb://127.0.0.1:27017/relife&#x27;</span>);</span><br><span class="line"><span class="comment">//4.设置回调 once绑定事件 事件回调函数只执行一次</span></span><br><span class="line">mongoose.<span class="property">connection</span>.<span class="title function_">once</span>(<span class="string">&#x27;open&#x27;</span>, <span class="function">() =&gt;</span> &#123; <span class="comment">//设置连接成功的回调</span></span><br><span class="line">    <span class="comment">// console.log(&quot;连接成功&quot;)</span></span><br><span class="line">    <span class="comment">//4.创建文档的结构对象</span></span><br><span class="line">    <span class="comment">//设置集合中文档的属性以及属性值的类型</span></span><br><span class="line">    <span class="keyword">let</span> <span class="title class_">BookSchema</span> = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">author</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">price</span>: <span class="title class_">Number</span>,</span><br><span class="line">        <span class="attr">is_hot</span>: <span class="title class_">Boolean</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//5.创建模型对象 对文档操作的封装对象 第一个参数是集合名称 第二个参数是结构对象</span></span><br><span class="line">    <span class="keyword">let</span> <span class="title class_">BookModel</span> = mongoose.<span class="title function_">model</span>(<span class="string">&#x27;books&#x27;</span>, <span class="title class_">BookSchema</span>)</span><br><span class="line">    <span class="comment">//6.新增</span></span><br><span class="line">    <span class="title class_">BookModel</span>.<span class="title function_">create</span>([</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;西游记&#x27;</span>,</span><br><span class="line">            <span class="attr">author</span>: <span class="string">&#x27;吴承恩&#x27;</span>,</span><br><span class="line">            <span class="attr">price</span>: <span class="number">19.9</span>,</span><br><span class="line">            <span class="attr">is_hot</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">    ], <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//判断是否有问题</span></span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果没有出错，则输出插入后的文档对象</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//7.关闭数据库连接</span></span><br><span class="line">        mongoose.<span class="title function_">disconnect</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">mongoose.<span class="property">connection</span>.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="function">() =&gt;</span> &#123; <span class="comment">//设置连接错误的回调</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;连接失败&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">mongoose.<span class="property">connection</span>.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">() =&gt;</span> &#123; <span class="comment">//设置连接关闭的回调</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;已经关闭数据库&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="字段类型"><a href="#字段类型" class="headerlink" title="字段类型"></a><strong>字段类型</strong></h5><p>文档结构可选的常用字段类型列表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>String</td>
<td>字符串</td>
</tr>
<tr>
<td>Number</td>
<td>数字</td>
</tr>
<tr>
<td>Boolean</td>
<td>布尔值</td>
</tr>
<tr>
<td>Array</td>
<td>数组，也可以使用 [] 来标识</td>
</tr>
<tr>
<td>Date</td>
<td>日期</td>
</tr>
<tr>
<td>Buffer</td>
<td>Buffer 对象</td>
</tr>
<tr>
<td>Mixed</td>
<td>任意类型，需要使用 <strong>mongoose.Schema.Types.Mixed</strong> 指定</td>
</tr>
<tr>
<td>ObjectId</td>
<td>对象 ID，需要使用 <strong>mongoose.Schema.Types.ObjectId</strong> 指定</td>
</tr>
<tr>
<td>Decimal128</td>
<td>高精度数字，需要使用 <strong>mongoose.Schema.Types.Decimal128</strong> 指定</td>
</tr>
</tbody>
</table>
</div>
<h3 id="字段值验证"><a href="#字段值验证" class="headerlink" title="字段值验证"></a><strong>字段值验证</strong></h3><p>Mongoose 有一些内建验证器，可以对字段值进行验证</p>
<h5 id="必填项"><a href="#必填项" class="headerlink" title="必填项"></a><strong>必填项</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title</span>: &#123;</span><br><span class="line"><span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line"><span class="attr">required</span>: <span class="literal">true</span> <span class="comment">// 设置必填项</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h5 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a><strong>默认值</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">author</span>: &#123;</span><br><span class="line"><span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line"><span class="attr">default</span>: <span class="string">&#x27;匿名&#x27;</span> <span class="comment">//默认值</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h5 id="枚举值"><a href="#枚举值" class="headerlink" title="枚举值"></a><strong>枚举值</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gender</span>: &#123;</span><br><span class="line"><span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line"><span class="attr">enum</span>: [<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>] <span class="comment">//设置的值必须是数组中的</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="唯一值"><a href="#唯一值" class="headerlink" title="唯一值"></a><strong>唯一值</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">username</span>: &#123;</span><br><span class="line"><span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line"><span class="attr">unique</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><em>unique 需要 重建集合 才能有效果</em></strong></p>
<p><strong><em>永远不要相信用户的输入</em></strong></p>
</blockquote>
<h3 id="CURD"><a href="#CURD" class="headerlink" title="CURD"></a><strong>CURD</strong></h3><p>数据库的基本操作包括四个，增加（create），删除（delete），修改（update），查（read）</p>
<h5 id="增加"><a href="#增加" class="headerlink" title="增加"></a><strong>增加</strong></h5><p>插入一条</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line"><span class="attr">title</span>:<span class="string">&#x27;给我一首歌的时间&#x27;</span>,</span><br><span class="line"><span class="attr">author</span>: <span class="string">&#x27;Jay&#x27;</span></span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line"><span class="comment">//错误</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line"><span class="comment">//插入后的数据对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>批量插入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.引入mongoose</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"><span class="comment">//2.链接mongodb数据库 connect 连接</span></span><br><span class="line">mongoose.<span class="title function_">connect</span>(<span class="string">&#x27;mongodb://127.0.0.1:27017/project&#x27;</span>);</span><br><span class="line"><span class="comment">//3.设置连接的回调</span></span><br><span class="line">mongoose.<span class="property">connection</span>.<span class="title function_">on</span>(<span class="string">&#x27;open&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//4.声明文档结构</span></span><br><span class="line">	<span class="keyword">const</span> <span class="title class_">PhoneSchema</span> = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">        <span class="attr">brand</span>:<span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">color</span>:<span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">price</span>:<span class="title class_">Number</span>,</span><br><span class="line">		<span class="attr">tags</span>:<span class="title class_">Array</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//6.创建模型对象</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">PhoneModel</span> = mongoose.<span class="title function_">model</span>(<span class="string">&#x27;phone&#x27;</span>,<span class="title class_">PhoneSchema</span>);</span><br><span class="line"><span class="title class_">PhoneModel</span>.<span class="title function_">insertMany</span>([</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="attr">brand</span>:<span class="string">&#x27;华为&#x27;</span>,</span><br><span class="line">    <span class="attr">color</span>:<span class="string">&#x27;灰色&#x27;</span>,</span><br><span class="line">    <span class="attr">price</span>:<span class="number">2399</span>,</span><br><span class="line">    <span class="attr">tags</span>:[<span class="string">&#x27;电量大&#x27;</span>,<span class="string">&#x27;屏幕大&#x27;</span>,<span class="string">&#x27;信号好&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="attr">brand</span>:<span class="string">&#x27;小米&#x27;</span>,</span><br><span class="line">    <span class="attr">color</span>:<span class="string">&#x27;白色&#x27;</span>,</span><br><span class="line">    <span class="attr">price</span>:<span class="number">2099</span>,</span><br><span class="line">    <span class="attr">tags</span>:[<span class="string">&#x27;电量大&#x27;</span>,<span class="string">&#x27;屏幕大&#x27;</span>,<span class="string">&#x27;信号好&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">],<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写入成功&#x27;</span>);</span><br><span class="line">mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a><strong>删除</strong></h5><p>删除一条数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">deleteOne</span>(&#123;<span class="attr">_id</span>:<span class="string">&#x27;5dd65f32be6401035cb5b1ed&#x27;</span>&#125;, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除成功&#x27;</span>);</span><br><span class="line">mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>批量删除</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">deleteMany</span>(&#123;<span class="attr">author</span>:<span class="string">&#x27;Jay&#x27;</span>&#125;, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除成功&#x27;</span>);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="更新-1"><a href="#更新-1" class="headerlink" title="更新"></a><strong>更新</strong></h5><p>更新一条数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">updateOne</span>(&#123;<span class="attr">author</span>: <span class="string">&#x27;JJ Lin&#x27;</span>&#125;, &#123;<span class="attr">author</span>: <span class="string">&#x27;林俊杰&#x27;</span>&#125;, <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>批量更新数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">updateMany</span>(&#123;<span class="attr">author</span>: <span class="string">&#x27;Leehom Wang&#x27;</span>&#125;, &#123;<span class="attr">author</span>: <span class="string">&#x27;王力宏&#x27;</span>&#125;, <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="查询-1"><a href="#查询-1" class="headerlink" title="查询"></a><strong>查询</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">findOne</span>(&#123;<span class="attr">author</span>: <span class="string">&#x27;王力宏&#x27;</span>&#125;, <span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//根据 id 查询数据</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">findById</span>(<span class="string">&#x27;5dd662b5381fc316b44ce167&#x27;</span>,<span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>批量查询数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不加条件查询</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">find</span>(<span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//加条件查询</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">find</span>(&#123;<span class="attr">author</span>: <span class="string">&#x27;王力宏&#x27;</span>&#125;, <span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="条件控制"><a href="#条件控制" class="headerlink" title="条件控制"></a><strong>条件控制</strong></h3><h5 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a><strong>运算符</strong></h5><p>在 mongodb 不能 &gt; &lt; &gt;= &lt;= !== 等运算符，需要使用替代符号</p>
<blockquote>
<p><strong>> 使用 $gt</strong></p>
<p><strong>&lt; 使用 $lt</strong></p>
<p><strong>>= 使用 $gte</strong></p>
<p><strong>&lt;= 使用 $lte</strong></p>
<p><strong>!== 使用 $ne</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="property">students</span>.<span class="title function_">find</span>(&#123;<span class="attr">id</span>:&#123;<span class="attr">$gt</span>:<span class="number">3</span>&#125;&#125;); id号比<span class="number">3</span>大的所有的记录</span><br></pre></td></tr></table></figure>
<h5 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a><strong>逻辑运算</strong></h5><p><strong>$or</strong> 逻辑或的情况</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="property">students</span>.<span class="title function_">find</span>(&#123;<span class="attr">$or</span>:[&#123;<span class="attr">age</span>:<span class="number">18</span>&#125;,&#123;<span class="attr">age</span>:<span class="number">24</span>&#125;]&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>$and</strong> 逻辑与的情况</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.students.find(&#123;$and: [&#123;age: &#123;$lt:20&#125;&#125;, &#123;age: &#123;$gt: 15&#125;&#125;]&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="正则匹配"><a href="#正则匹配" class="headerlink" title="正则匹配"></a><strong>正则匹配</strong></h5><p>条件中可以直接使用 JS 的正则语法，通过正则可以进行模糊查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.students.find(&#123;name:/imissyou/&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="个性化读取"><a href="#个性化读取" class="headerlink" title="个性化读取"></a><strong>个性化读取</strong></h3><h5 id="字段筛选"><a href="#字段筛选" class="headerlink" title="字段筛选"></a><strong>字段筛选</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//0:不要的字段</span></span><br><span class="line"><span class="comment">//1:要的字段</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">find</span>().<span class="title function_">select</span>(&#123;<span class="attr">_id</span>:<span class="number">0</span>,<span class="attr">title</span>:<span class="number">1</span>&#125;).<span class="title function_">exec</span>(<span class="keyword">function</span>(<span class="params">err,data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="数据排序"><a href="#数据排序" class="headerlink" title="数据排序"></a><strong>数据排序</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//sort 排序</span></span><br><span class="line"><span class="comment">//1:升序</span></span><br><span class="line"><span class="comment">//-1:倒序</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">find</span>().<span class="title function_">sort</span>(&#123;<span class="attr">hot</span>:<span class="number">1</span>&#125;).<span class="title function_">exec</span>(<span class="keyword">function</span>(<span class="params">err,data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="数据截取"><a href="#数据截取" class="headerlink" title="数据截取"></a><strong>数据截取</strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//skip 跳过 limit 限定</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">find</span>().<span class="title function_">skip</span>(<span class="number">10</span>).<span class="title function_">limit</span>(<span class="number">10</span>).<span class="title function_">exec</span>(<span class="keyword">function</span>(<span class="params">err,data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="图形化管理工具"><a href="#图形化管理工具" class="headerlink" title="图形化管理工具"></a><strong>图形化管理工具</strong></h3><p>我们可以使用图形化的管理工具来对 Mongodb 进行交互，这里演示两个图形化工具</p>
<blockquote>
<p>Robo 3T 免费 <strong><a target="_blank" rel="noopener" href="https://github.com/Studio3T/robomongo/releases">https://github.com/Studio3T/robomongo/releases</a></strong></p>
<p>Navicat 收费 <strong><a target="_blank" rel="noopener" href="https://www.navicat.com.cn/">https://www.navicat.com.cn/</a></strong></p>
</blockquote>
<h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a><strong>接口</strong></h1><h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a><strong>简介</strong></h3><h4 id="接口是什么"><a href="#接口是什么" class="headerlink" title="接口是什么"></a><strong>接口是什么</strong></h4><p>接口是 <strong>前后端通信的桥梁</strong></p>
<p>简单理解：一个接口就是 <strong>服务中的一个路由规则</strong> ，根据请求响应结果</p>
<p>接口的英文单词是 API (Application Program Interface)，所以有时也称之为 <strong>API 接口</strong></p>
<p>这里的接口指的是『数据接口』， <strong>与编程语言（Java，Go 等）中的接口语法不同</strong></p>
<h4 id="接口的作用"><a href="#接口的作用" class="headerlink" title="接口的作用"></a><strong>接口的作用</strong></h4><p><strong><em>实现 前后端通信</em></strong></p>
<h4 id="接口的开发与调用"><a href="#接口的开发与调用" class="headerlink" title="接口的开发与调用"></a><strong>接口的开发与调用</strong></h4><p>大多数接口都是由 <strong>后端工程师</strong> 开发的， <strong>开发语言不限</strong></p>
<p>一般情况下接口都是由 <strong>前端工程师</strong> 调用的，但有时 <strong>后端工程师也会调用接口</strong> ，比如短信接口，支付接口等</p>
<h4 id="接口的组成"><a href="#接口的组成" class="headerlink" title="接口的组成"></a><strong>接口的组成</strong></h4><p>一个接口一般由如下几个部分组成</p>
<blockquote>
<p><strong>请求方法</strong></p>
<p><strong>接口地址（URL）</strong></p>
<p><strong>请求参数</strong></p>
<p><strong>响应结果</strong></p>
<blockquote>
<p>一个接口示例 <strong><a target="_blank" rel="noopener" href="https://www.free-api.com/doc/325">https://www.free-api.com/doc/325</a></strong></p>
</blockquote>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230413130438765.png" alt="image-20230413130438765"></p>
<blockquote>
<p>　　体验一下：<strong><a target="_blank" rel="noopener" href="https://api.asilu.com/idcard/?id=371522199111299668">https://api.asilu.com/idcard/?id=371522199111299668</a></strong></p>
</blockquote>
<h3 id="RESTful-API"><a href="#RESTful-API" class="headerlink" title="RESTful API"></a><strong>RESTful API</strong></h3><p>RESTful API 是一种特殊风格的接口，主要特点有如下几个：</p>
<ul>
<li><p>URL 中的路径表示 <strong>资源</strong> ，路径中不能有 <strong>动词</strong> ，例如 <strong>create , delete , update</strong> 等这些都不能有</p>
</li>
<li><p>操作资源要与 <strong>HTTP 请求方法</strong> 对应</p>
</li>
<li><p>操作结果要与 <strong>HTTP 响应状态码</strong> 对应</p>
</li>
</ul>
<p>规则示例：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>操作</th>
<th>请求类型</th>
<th>URL</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td>新增歌曲</td>
<td>POST</td>
<td>/song</td>
<td>返回新生成的歌曲信息</td>
</tr>
<tr>
<td>删除歌曲</td>
<td>DELETE</td>
<td>/song/10</td>
<td>返回一个空文档</td>
</tr>
<tr>
<td>修改歌曲</td>
<td>PUT</td>
<td>/song/10</td>
<td>返回更新后的歌曲信息</td>
</tr>
<tr>
<td>修改歌曲</td>
<td>PATCH</td>
<td>/song/10</td>
<td>返回更新后的歌曲信息</td>
</tr>
<tr>
<td>获取所有歌曲</td>
<td>GET</td>
<td>/song</td>
<td>返回歌曲列表数组</td>
</tr>
<tr>
<td>获取单个歌曲</td>
<td>GET</td>
<td>/song/10</td>
<td>返回单个歌曲信息</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>扩展阅读：<strong><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2014/05/restful_api.html">https://www.ruanyifeng.com/blog/2014/05/restful_api.html</a></strong></p>
</blockquote>
<h3 id="json-server"><a href="#json-server" class="headerlink" title="json-server"></a><strong>json-server</strong></h3><p>json-server 本身是一个 JS 编写的工具包，可以快速搭建 RESTful API 服务</p>
<p>官方地址: <strong><a target="_blank" rel="noopener" href="https://github.com/typicode/json-server">https://github.com/typicode/json-server</a></strong></p>
<p>操作步骤：</p>
<p>1.全局安装 json-server</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g json-server</span><br></pre></td></tr></table></figure>
<p>2.创建 JSON 文件（db.json），编写基本结构</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;song&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;干杯&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;singer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;五月天&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;当&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;singer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;动力火车&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;不能说的秘密&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;singer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;周杰伦&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">	<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>3.以 JSON 文件所在文件夹作为工作目录 ，执行如下命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json-server --watch db.json</span><br></pre></td></tr></table></figure>
<p>默认监听端口为 <strong>3000</strong></p>
<h3 id="接口测试工具"><a href="#接口测试工具" class="headerlink" title="接口测试工具"></a><strong>接口测试工具</strong></h3><p>介绍几个接口测试工具:</p>
<p>apipost <strong><a target="_blank" rel="noopener" href="https://www.apipost.cn/">https://www.apipost.cn/</a></strong> (中文)</p>
<p>apifox <strong><a target="_blank" rel="noopener" href="https://www.apifox.cn/">https://www.apifox.cn/</a></strong> (中文)</p>
<p>postman <strong><a target="_blank" rel="noopener" href="https://www.postman.com/">https://www.postman.com/</a></strong> (英文)</p>
<h1 id="会话控制"><a href="#会话控制" class="headerlink" title="会话控制"></a><strong>会话控制</strong></h1><h3 id="介绍-3"><a href="#介绍-3" class="headerlink" title="介绍"></a><strong>介绍</strong></h3><p>所谓会话控制就是 <strong>对会话进行控制</strong></p>
<p>HTTP 是一种无状态的协议，它没有办法区分多次的请求是否来自于同一个客户端， 无法区分用户</p>
<p>而产品中又大量存在的这样的需求，所以我们需要通过 会话控制 来解决该问题</p>
<p>常见的会话控制技术有三种：</p>
<blockquote>
<p><strong>cookie</strong></p>
<p><strong>session</strong></p>
<p><strong>token</strong></p>
</blockquote>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a><strong>cookie</strong></h2><h3 id="cookie-是什么"><a href="#cookie-是什么" class="headerlink" title="cookie 是什么"></a><strong>cookie</strong> <strong>是什么</strong></h3><p>cookie 是 HTTP 服务器发送到用户浏览器并保存在本地的一小块数据</p>
<p><strong>cookie 是保存在浏览器端的一小块数据</strong></p>
<p><strong>cookie 是按照域名划分保存的</strong></p>
<p>简单示例：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>域名</th>
<th>cookie</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>www.baidu.com</strong></td>
<td>a=100; b=200</td>
</tr>
<tr>
<td><strong>www.bilibili.com</strong></td>
<td>xid=1020abce121; hm=112411213</td>
</tr>
<tr>
<td>jd.com</td>
<td>x=100; ocw=12414cce</td>
</tr>
</tbody>
</table>
</div>
<h3 id="cookie-的特点"><a href="#cookie-的特点" class="headerlink" title="cookie 的特点"></a><strong>cookie</strong> <strong>的特点</strong></h3><p>浏览器向服务器发送请求时，会自动将 <strong>当前域名下</strong> 可用的 cookie 设置在请求头中，然后传递给服务器</p>
<p>这个请求头的名字也叫 <strong>cookie</strong> ，所以将 <strong>cookie 理解为一个 HTTP 的请求头也是可以的</strong></p>
<h3 id="cookie-的运行流程"><a href="#cookie-的运行流程" class="headerlink" title="cookie 的运行流程"></a><strong>cookie</strong> <strong>的运行流程</strong></h3><p>填写账号和密码校验身份，校验通过后下发 cookie</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230414190037036.png" alt="image-20230414190037036"></p>
<p>有了cookie之后，后续向服务器发送请求时，就会自动携带cookie</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230414190117602.png" alt="image-20230414190117602"></p>
<h3 id="浏览器操作-cookie"><a href="#浏览器操作-cookie" class="headerlink" title="浏览器操作 cookie"></a><strong>浏览器操作</strong> <strong>cookie</strong></h3><p>浏览器操作 cookie 的操作，使用相对较少，大家了解即可</p>
<ol>
<li><p>禁用所有 cookie</p>
</li>
<li><p>删除 cookie</p>
</li>
<li><p>查看 cookie</p>
</li>
</ol>
<h3 id="cookie-的代码操作"><a href="#cookie-的代码操作" class="headerlink" title="cookie 的代码操作"></a><strong>cookie</strong> <strong>的代码操作</strong></h3><p>express 中可以使用 <strong>cookie-parser</strong> 进行处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express =<span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//1. 安装 cookie-parser npm i cookie-parser</span></span><br><span class="line"><span class="comment">//2. 引入 cookieParser 包</span></span><br><span class="line"><span class="keyword">const</span> cookieParser = <span class="built_in">require</span>(<span class="string">&#x27;cookie-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//3. 设置 cookieParser 中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cookieParser</span>());</span><br><span class="line"><span class="comment">//4-1 设置 cookie</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/set-cookie&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 不带时效性</span></span><br><span class="line">    response.<span class="title function_">cookie</span>(<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;wangwu&#x27;</span>);</span><br><span class="line">    <span class="comment">// 带时效性</span></span><br><span class="line">    response.<span class="title function_">cookie</span>(<span class="string">&#x27;email&#x27;</span>,<span class="string">&#x27;23123456@qq.com&#x27;</span>, &#123;<span class="attr">maxAge</span>: <span class="number">5</span>*<span class="number">60</span>*<span class="number">1000</span> &#125;);</span><br><span class="line">    <span class="comment">//响应</span></span><br><span class="line">    response.<span class="title function_">send</span>(<span class="string">&#x27;Cookie的设置&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//4-2 读取 cookie</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/get-cookie&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//读取 cookie</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">cookies</span>);</span><br><span class="line">    <span class="comment">//响应体</span></span><br><span class="line">    response.<span class="title function_">send</span>(<span class="string">&#x27;Cookie的读取&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//4-3 删除cookie</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/delete-cookie&#x27;</span>, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//删除</span></span><br><span class="line">    response.<span class="title function_">clearCookie</span>(<span class="string">&#x27;username&#x27;</span>);</span><br><span class="line">    <span class="comment">//响应</span></span><br><span class="line">    response.<span class="title function_">send</span>(<span class="string">&#x27;cookie 的清除&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//4. 启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动....&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>不同浏览器中的 cookie 是相互独立的，不共享</strong></p>
</blockquote>
<h2 id="session"><a href="#session" class="headerlink" title="session"></a><strong>session</strong></h2><h3 id="session-是什么"><a href="#session-是什么" class="headerlink" title="session 是什么"></a><strong>session</strong> <strong>是什么</strong></h3><p>session 是保存在 <strong>服务器端的一块儿数据</strong> ，保存当前访问用户的相关信息</p>
<h3 id="session-的作用"><a href="#session-的作用" class="headerlink" title="session 的作用"></a><strong>session</strong> <strong>的作用</strong></h3><p>实现会话控制，可以识别用户的身份，快速获取当前用户的相关信息</p>
<h3 id="session-运行流程"><a href="#session-运行流程" class="headerlink" title="session 运行流程"></a><strong>session</strong> <strong>运行流程</strong></h3><p>填写账号和密码校验身份，校验通过后创建 <strong>session 信息</strong> ，然后将 <strong>session_id</strong> 的值通过响应头返回给浏览器</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230414190439206.png" alt="image-20230414190439206"></p>
<p>有了 cookie，下次发送请求时会自动携带 cookie，服务器通过 <strong>cookie</strong> 中的 <strong>session_id</strong> 的值确定用户的身份</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230414190505929.png" alt="image-20230414190505929"></p>
<h3 id="session-的代码操作"><a href="#session-的代码操作" class="headerlink" title="session 的代码操作"></a><strong>session</strong> <strong>的代码操作</strong></h3><p>express 中可以使用 <strong>express-session</strong> 对 session 进行操作</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//1. 安装包 npm i express-session connect-mongo</span></span><br><span class="line"><span class="comment">//2. 引入 express-session connect-mongo</span></span><br><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">&quot;express-session&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MongoStore</span> = <span class="built_in">require</span>(<span class="string">&#x27;connect-mongo&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//3. 设置 session 的中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">session</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sid&#x27;</span>, <span class="comment">//设置cookie的name，默认值是：connect.sid</span></span><br><span class="line">    <span class="attr">secret</span>: <span class="string">&#x27;atguigu&#x27;</span>, <span class="comment">//参与加密的字符串（又称签名）</span></span><br><span class="line">    <span class="attr">saveUninitialized</span>: <span class="literal">false</span>, <span class="comment">//是否为每次请求都设置一个cookie用来存储session的id</span></span><br><span class="line">    <span class="attr">resave</span>: <span class="literal">true</span>, <span class="comment">//是否在每次请求时重新保存session</span></span><br><span class="line">    <span class="attr">store</span>: <span class="title class_">MongoStore</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">mongoUrl</span>: <span class="string">&#x27;mongodb://127.0.0.1:27017/project&#x27;</span> <span class="comment">//数据库的连接配置</span></span><br><span class="line">&#125;),</span><br><span class="line"><span class="attr">cookie</span>: &#123;</span><br><span class="line">    <span class="attr">httpOnly</span>: <span class="literal">true</span>, <span class="comment">// 开启后前端无法通过 JS 操作</span></span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">1000</span> * <span class="number">300</span> <span class="comment">// 这一条 是控制 sessionID 的过期时间的！！！</span></span><br><span class="line">&#125;,</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 session</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/login&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//设置session</span></span><br><span class="line">    req.<span class="property">session</span>.<span class="property">username</span> = <span class="string">&#x27;zhangsan&#x27;</span>;</span><br><span class="line">    req.<span class="property">session</span>.<span class="property">email</span> = <span class="string">&#x27;zhangsan@qq.com&#x27;</span></span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;登录成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//获取 session</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/home&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;session的信息&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">session</span>.<span class="property">username</span>);</span><br><span class="line"><span class="keyword">if</span> (req.<span class="property">session</span>.<span class="property">username</span>) &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">`你好 <span class="subst">$&#123;req.session.username&#125;</span>`</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;登录 注册&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//销毁 session</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/logout&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//销毁session</span></span><br><span class="line">    <span class="comment">// res.send(&#x27;设置session&#x27;);</span></span><br><span class="line">    req.<span class="property">session</span>.<span class="title function_">destroy</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">		res.<span class="title function_">send</span>(<span class="string">&#x27;成功退出&#x27;</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口 &#x27;</span> + <span class="number">3000</span> + <span class="string">&#x27; 监听中...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="session-和-cookie-的区别"><a href="#session-和-cookie-的区别" class="headerlink" title="session 和 cookie 的区别"></a><strong>session</strong> <strong>和</strong> <strong>cookie</strong> <strong>的区别</strong></h3><blockquote>
<p>cookie 和 session 的区别主要有如下几点：</p>
<ol>
<li><p><em>存在的位置</em></p>
<p><strong>cookie：浏览器端</strong></p>
<p><strong>session：服务端</strong></p>
</li>
<li><p><em>安全性</em></p>
<p><strong>cookie 是以明文的方式存放在客户端的，安全性相对较低</strong></p>
<p><strong>session 存放于服务器中，所以安全性 相对 较好</strong></p>
</li>
<li><p><em>网络传输量</em></p>
<p><strong>cookie 设置内容过多会增大报文体积， 会影响传输效率</strong></p>
<p><strong>session 数据存储在服务器，只是通过 cookie 传递 id，所以不影响传输效率</strong></p>
</li>
<li><p><em>存储限制</em></p>
<p><strong>浏览器限制单个 cookie 保存的数据不能超过 4K ，且单个域名下的存储数量也有限制</strong></p>
<p><strong>session 数据存储在服务器中，所以没有这些限制</strong></p>
</li>
</ol>
</blockquote>
<h2 id="token"><a href="#token" class="headerlink" title="token"></a><strong>token</strong></h2><h3 id="token-是什么"><a href="#token-是什么" class="headerlink" title="token 是什么"></a><strong>token</strong> <strong>是什么</strong></h3><p>token 是服务端生成并返回给 HTTP 客户端的一串加密字符串， <strong>token</strong> 中保存着 <strong>用户信息</strong></p>
<h3 id="token-的作用"><a href="#token-的作用" class="headerlink" title="token 的作用"></a><strong>token</strong> <strong>的作用</strong></h3><p>实现会话控制，可以识别用户的身份，主要用于移动端 APP</p>
<h3 id="token-的工作流程"><a href="#token-的工作流程" class="headerlink" title="token 的工作流程"></a><strong>token</strong> <strong>的工作流程</strong></h3><p>填写账号和密码校验身份，校验通过后响应 token，token 一般是在响应体中返回给客户端的</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230414190841259.png" alt="image-20230414190841259"></p>
<p>后续发送请求时，需要手动将 token 添加在请求报文中，一般是放在请求头中</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230414190855012.png" alt="image-20230414190855012"></p>
<h3 id="token-的特点"><a href="#token-的特点" class="headerlink" title="token 的特点"></a><strong>token</strong> <strong>的特点</strong></h3><blockquote>
<p>服务端压力更小</p>
<p>​    <strong>数据存储在客户端</strong></p>
<p>相对更安全</p>
<p>​    <strong>数据加密</strong></p>
<p>​    <strong>可以避免 CSRF（跨站请求伪造）</strong></p>
<p>扩展性更强</p>
<p>​    <strong>服务间可以共享</strong></p>
<p>​    <strong>增加服务节点更简单</strong></p>
</blockquote>
<h2 id="JWT-jsonwebToken"><a href="#JWT-jsonwebToken" class="headerlink" title="JWT(jsonwebToken)"></a><strong>JWT(jsonwebToken)</strong></h2><p>JWT（JSON Web Token ）是目前最流行的跨域认证解决方案，可用于基于 <strong>token</strong> 的身份验证JWT 使 token 的生成与校验更规范</p>
<p>我们可以使用 jsonwebtoken 包 来操作 token</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入 jsonwebtokan</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>);</span><br><span class="line"><span class="comment">//创建 token</span></span><br><span class="line"><span class="comment">// jwt.sign(数据, 加密字符串, 配置对象)</span></span><br><span class="line"><span class="keyword">let</span> token = jwt.<span class="title function_">sign</span>(&#123;</span><br><span class="line"><span class="attr">username</span>: <span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line">&#125;, <span class="string">&#x27;atguigu&#x27;</span>, &#123;</span><br><span class="line"><span class="attr">expiresIn</span>: <span class="number">60</span> <span class="comment">//单位是 秒</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//解析 token</span></span><br><span class="line">jwt.<span class="title function_">verify</span>(token, <span class="string">&#x27;atguigu&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;校验失败~~&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>扩展阅读：<strong><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html">https://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html</a></strong></p>
</blockquote>
<h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a><strong>附录</strong></h1><h3 id="本地域名"><a href="#本地域名" class="headerlink" title="本地域名"></a><strong>本地域名</strong></h3><p>所谓本地域名就是 <strong>只能在本机使用的域名</strong> ，一般在开发阶段使用</p>
<h4 id="操作流程"><a href="#操作流程" class="headerlink" title="操作流程"></a><strong>操作流程</strong></h4><p>编辑文件 <strong>C:\Windows\System32\drivers\etc\hosts</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 www.baidu.com</span><br></pre></td></tr></table></figure>
<p>如果修改失败， 可以修改该文件的权限</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\Luomu777\AppData\Roaming\Typora\typora-user-images\image-20230414191213112.png" alt="image-20230414191213112"></p>
<h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a><strong>原理</strong></h4><p>在地址栏输入 <strong>域名</strong> 之后，浏览器会先进行 DNS（Domain Name System） 查询，获取该域名对应的 IP 地址</p>
<p>请求会发送到 DNS 服务器，可以 <strong>根据域名返回 IP 地址</strong></p>
<p>可以通过 <strong>ipconfig /all</strong> 查看本机的 DNS 服务器</p>
<p><strong>hosts</strong> 文件也可以设置域名与 IP 的映射关系，在发送请求前，可以通过该文件获取域名的 IP 地址</p>
<hr>
<h2 id="理解-Node-js-中的回调-Callback-函数"><a href="#理解-Node-js-中的回调-Callback-函数" class="headerlink" title="理解 Node.js 中的回调(Callback)函数"></a>理解 Node.js 中的回调(Callback)函数</h2><h3 id="分类-编程技术"><a href="#分类-编程技术" class="headerlink" title="分类 编程技术"></a><em>分类</em> <a target="_blank" rel="noopener" href="https://www.runoob.com/w3cnote_genre/code">编程技术</a></h3><p>究竟什么是回调函数(Callback)，网上有许许多多的文章，大部分看得人云里雾外，这些文章大概分成两类，第一类堆砌了太多的术语，基本上不明白术语就没法看，另一类反过来，不讲术语，完全是举一些脱离编程的生活化例子来类比，看的人更加晕头转向。</p>
<p>作为JS的核心，回调函数和异步执行是紧密相关的，不跨过这个门槛，很多回调代码能把人看晕！</p>
<blockquote>
<p>引用stack overflow 上大神的描述 其实callback 很简单也很纯粹:</p>
<p><strong>A “callback” is any function that is called by another function which takes the first function as a parameter. （在一个函数中调用另外一个函数就是callback）</strong></p>
</blockquote>
<p>以下是一个最简单的例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b</span>(<span class="params">aa</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> + aa</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//调用：</span></span><br><span class="line"><span class="keyword">var</span> c=<span class="number">0</span></span><br><span class="line">c = <span class="title function_">b</span>(<span class="title function_">a</span>()) <span class="comment">//A是个函数，但它又作为一个参数在B函数中被调用</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c) <span class="comment">//结果显示3</span></span><br></pre></td></tr></table></figure>
<p>以上例子极易理解，下面再引入另一个概念：<strong>异步</strong></p>
<p>看以下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">0</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bb</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params">time</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        a=<span class="number">6</span></span><br><span class="line">    &#125;, time);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//调用:</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line"><span class="title function_">timer</span>(<span class="number">3000</span>)</span><br><span class="line"><span class="title function_">bb</span>(a)</span><br></pre></td></tr></table></figure>
<p>以上代码很简单，我们需要的逻辑是，全局变量a初值为0，然后过3秒后，让它为6，然后再打印出来，看上去，上面的代码没有问题，理论上符合我们的逻辑需求，但却发现结果是这样：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>咋回事？</p>
<p>因为JS是一种异步执行语言，尽管timer函数内让a=6了，但是JS不会死等时间结束再跳出函数，而是马上就会执行下一步语句(即调用bb函数)，但这时候3秒钟根本就没结束，a还没有被重新赋值，所以打印出来还是为0。</p>
<p>用回调函数可以解决这个问题:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">0</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bb</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params">time, callback</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        a = <span class="number">6</span></span><br><span class="line">        <span class="title function_">callback</span>(a);</span><br><span class="line">    &#125;, time);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//调用:</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line"><span class="title function_">timer</span>(<span class="number">3000</span>,bb)</span><br></pre></td></tr></table></figure>
<p>这次，在timer函数中添加了一个关键字callback，意思就是说此处不是一个普通的参数，而是一个函数名，打起精神，关键的地方来了：</p>
<blockquote>
<p><strong><em>一般而言，函数的形参是指由外往内向函数体传递变量的入口，但此处加了callback后则完全相反，它是指函数体在完成某种使命后调用外部函数的出口！这时候应该明白什么叫”回调”了吧，也就是回头调用外部函数的意思。</em></strong></p>
</blockquote>
<p>在本例中，当3秒钟到了后，首先a=6，然后通过关键字callback(a)调用了函数bb(x)，结果显示：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>
<p>这个逻辑，符合我们的需求。</p>
<p>在写法上，也可以不需要定义函数bb, 直接在调用timer的时候写成function形式,把调用部分改成这样也可以，效果完全一样:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line"><span class="title function_">timer</span>(<span class="number">3000</span>, <span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这种写法函数名都不需要了（术语称为”匿名函数”），在nodejs代码中更为常见也更好理解，翻译成自然语言就是：定时3秒，完成后再回头调用function(x)里面的内容。</p>
<p>nodejs编程中大量使用了异步编程技术，这是为了高效使用硬件，同时也可以不造成同步阻塞。其实nodejs在底层还是通过多线程技术实现的异步操作，但普通用户并不需要深究它的实现方法，我们只要做好我们的异步处理即可。</p>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>NodeJS</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="http://www.luomu.icu/2023/05/17/%E7%AC%AC%E5%85%AD%E7%AF%87%E6%96%87%E7%AB%A0/">http://www.luomu.icu/2023/05/17/%E7%AC%AC%E5%85%AD%E7%AF%87%E6%96%87%E7%AB%A0/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>LuoMu</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2023-05-17</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2023-05-17</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8B%93%E5%B1%95/">-拓展</a></div><div class="post_share"><div class="social-share" data-image="https://w.wallhaven.cc/full/gp/wallhaven-gpqypd.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/05/17/%E7%AC%AC%E4%BA%94%E7%AF%87%E6%96%87%E7%AB%A0/" title="Vue"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/o5/wallhaven-o51q1p.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Vue</div></div></a></div><div class="next-post pull-right"><a href="/2023/05/13/%E7%AC%AC%E4%BA%8C%E7%AF%87%E6%96%87%E7%AB%A0/" title="Axios基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/6d/wallhaven-6d57ox.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Axios基础</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/05/13/%E7%AC%AC%E4%BA%8C%E7%AF%87%E6%96%87%E7%AB%A0/" title="Axios基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/6d/wallhaven-6d57ox.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-13</div><div class="title">Axios基础</div></div></a></div><div><a href="/2023/05/12/%E7%AC%AC%E4%B8%89%E7%AF%87%E6%96%87%E7%AB%A0/" title="Promise基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/zy/wallhaven-zyqlkv.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-12</div><div class="title">Promise基础</div></div></a></div><div><a href="/2023/05/13/%E7%AC%AC%E5%9B%9B%E7%AF%87%E6%96%87%E7%AB%A0/" title="TypeScript"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/6d/wallhaven-6d57ox.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-13</div><div class="title">TypeScript</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">LuoMu</div><div class="author-info__description">个人博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/luomu777777"><i class="fab fa-github"></i><span>Enter Into</span></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/luomu777777" target="_blank" title="Github"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://res.abeim.cn/api/qq/?qq=2963684671" target="_blank" title="QQ"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-qq"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/115229274" target="_blank" title="B站"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="social-icon faa-parent animated-hover" href="mailto:2963684671@qq.com" target="_blank" title="邮箱"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bian"></use></svg></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#NodeJs"><span class="toc-text">NodeJs</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#NodeJS%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">NodeJS的应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="toc-text">命令行常用操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">编码注意事项</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Buffer%E3%80%90%E7%BC%93%E5%86%B2%E5%99%A8%E3%80%91"><span class="toc-text">Buffer【缓冲器】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-text">特点:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F"><span class="toc-text">创建方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#buffer%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-text">buffer的操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">程序运行的基本流程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Fs%E6%A8%A1%E5%9D%97%EF%BC%81"><span class="toc-text">Fs模块！</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5"><span class="toc-text">文件写入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#writeFile-%E5%BC%82%E6%AD%A5%E5%86%99%E5%85%A5"><span class="toc-text">writeFile 异步写入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#writeFileSync-%E5%90%8C%E6%AD%A5%E5%86%99%E5%85%A5"><span class="toc-text">writeFileSync 同步写入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#appendFile-appendFileSync-%E8%BF%BD%E5%8A%A0%E5%86%99%E5%85%A5"><span class="toc-text">appendFile &#x2F; appendFileSync 追加写入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#createWriteStream-%E6%B5%81%E5%BC%8F%E5%86%99%E5%85%A5"><span class="toc-text">createWriteStream 流式写入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">写入文件的场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="toc-text">文件读取</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#readFile-%E5%BC%82%E6%AD%A5%E8%AF%BB%E5%8F%96"><span class="toc-text">readFile 异步读取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#readFileSync-%E5%90%8C%E6%AD%A5%E8%AF%BB%E5%8F%96"><span class="toc-text">readFileSync 同步读取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#createReadStream%E6%B5%81%E5%BC%8F%E8%AF%BB%E5%8F%96"><span class="toc-text">createReadStream流式读取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">读取文件应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%A7%BB%E5%8A%A8%E4%B8%8E%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-text">文件移动与重命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4"><span class="toc-text">文件删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%A4%B9%E6%93%8D%E4%BD%9C"><span class="toc-text">文件夹操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#mkdir-%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-text">mkdir 创建文件夹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#readdir-%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-text">readdir 读取文件夹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#rmdir-%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-text">rmdir 删除文件夹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%B5%84%E6%BA%90%E7%8A%B6%E6%80%81"><span class="toc-text">查看资源状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-text">相对路径问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dirname"><span class="toc-text">__dirname</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PATH%E6%A8%A1%E5%9D%97"><span class="toc-text">PATH模块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HTTP%E6%A8%A1%E5%9D%97"><span class="toc-text">HTTP模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-text">请求报文的组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E7%9A%84%E8%AF%B7%E6%B1%82%E8%A1%8C"><span class="toc-text">HTTP 的请求行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-text">HTTP 请求头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E7%9A%84%E8%AF%B7%E6%B1%82%E4%BD%93"><span class="toc-text">HTTP 的请求体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-text">响应报文的组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-HTTP-%E6%9C%8D%E5%8A%A1"><span class="toc-text">创建 HTTP 服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4"><span class="toc-text">操作步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-text">测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9F%A5%E7%9C%8B-HTTP-%E6%8A%A5%E6%96%87"><span class="toc-text">浏览器查看 HTTP 报文</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%AF%B7%E6%B1%82%E8%A1%8C%E4%B8%8E%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-text">查看请求行与请求头</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%AF%B7%E6%B1%82%E4%BD%93"><span class="toc-text">查看请求体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B-URL-%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">查看 URL 查询字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E8%A1%8C%E4%B8%8E%E5%93%8D%E5%BA%94%E5%A4%B4"><span class="toc-text">查看响应行与响应头</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E4%BD%93"><span class="toc-text">查看响应体</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96-HTTP-%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-text">获取 HTTP 请求报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE-HTTP-%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-text">设置 HTTP 响应报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E9%A1%B5%E8%B5%84%E6%BA%90%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B"><span class="toc-text">网页资源的基本加载过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1"><span class="toc-text">静态资源服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E6%A0%B9%E7%9B%AE%E5%BD%95%E6%88%96%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%9B%AE%E5%BD%95"><span class="toc-text">网站根目录或静态资源目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E9%A1%B5%E4%B8%AD%E7%9A%84-URL"><span class="toc-text">网页中的 URL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-text">绝对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-text">相对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E9%A1%B5%E4%B8%AD%E4%BD%BF%E7%94%A8-URL-%E7%9A%84%E5%9C%BA%E6%99%AF%E5%B0%8F%E7%BB%93"><span class="toc-text">网页中使用 URL 的场景小结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E8%B5%84%E6%BA%90%E7%B1%BB%E5%9E%8B%EF%BC%88mime-%E7%B1%BB%E5%9E%8B%EF%BC%89"><span class="toc-text">设置资源类型（mime 类型）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GET%E5%92%8CPOST%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">GET和POST请求的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Node-js-%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-text">Node.js 模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E4%B8%8E%E6%A8%A1%E5%9D%97"><span class="toc-text">什么是模块化与模块 ?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="toc-text">什么是模块化项目 ?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E5%A5%BD%E5%A4%84"><span class="toc-text">模块化好处</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E6%9A%B4%E9%9C%B2%E6%95%B0%E6%8D%AE"><span class="toc-text">模块暴露数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-text">模块初体验</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%EF%BC%88%E5%BC%95%E5%85%A5%EF%BC%89%E6%A8%A1%E5%9D%97"><span class="toc-text">导入（引入）模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">导入模块的基本流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CommonJS-%E8%A7%84%E8%8C%83"><span class="toc-text">CommonJS 规范</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-text">包管理工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%85%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">包是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-1"><span class="toc-text">包管理工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-text">常用的包管理工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#npm"><span class="toc-text">npm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#npm-%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">npm 的安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">npm 基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%8C%85"><span class="toc-text">搜索包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-text">下载安装包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#require-%E5%AF%BC%E5%85%A5-npm-%E5%8C%85%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">require 导入 npm 包基本流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-text">生产环境与开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7%E4%BE%9D%E8%B5%96%E4%B8%8E%E5%BC%80%E5%8F%91%E4%BE%9D%E8%B5%96"><span class="toc-text">生产依赖与开发依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85"><span class="toc-text">全局安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-windows-%E6%89%A7%E8%A1%8C%E7%AD%96%E7%95%A5"><span class="toc-text">修改 windows 执行策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-Path"><span class="toc-text">环境变量 Path</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%8C%85%E4%BE%9D%E8%B5%96"><span class="toc-text">安装包依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E7%9A%84%E5%8C%85"><span class="toc-text">安装指定版本的包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E4%BE%9D%E8%B5%96"><span class="toc-text">删除依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%E5%88%AB%E5%90%8D"><span class="toc-text">配置命令别名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cnpm"><span class="toc-text">cnpm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4"><span class="toc-text">操作命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm-%E9%85%8D%E7%BD%AE%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F"><span class="toc-text">npm 配置淘宝镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E9%85%8D%E7%BD%AE"><span class="toc-text">直接配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE"><span class="toc-text">工具配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#yarn"><span class="toc-text">yarn</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#yarn-%E4%BB%8B%E7%BB%8D"><span class="toc-text">yarn 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yarn-%E7%89%B9%E7%82%B9"><span class="toc-text">yarn 特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yarn-%E5%AE%89%E8%A3%85"><span class="toc-text">yarn 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yarn-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">yarn 常用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yarn-%E9%85%8D%E7%BD%AE%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F"><span class="toc-text">yarn 配置淘宝镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm-%E5%92%8C-yarn-%E9%80%89%E6%8B%A9"><span class="toc-text">npm 和 yarn 选择</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E5%8F%91%E5%B8%83%E5%8C%85"><span class="toc-text">管理发布包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%8E%E5%8F%91%E5%B8%83"><span class="toc-text">创建与发布</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E5%8C%85"><span class="toc-text">更新包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%8C%85"><span class="toc-text">删除包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E5%86%85%E5%AE%B9"><span class="toc-text">扩展内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#NVM"><span class="toc-text">NVM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-1"><span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><span class="toc-text">下载安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">常用命令</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Express-%E4%BB%8B%E7%BB%8D"><span class="toc-text">Express 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#express-%E4%BD%BF%E7%94%A8"><span class="toc-text">express 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#express-%E4%B8%8B%E8%BD%BD"><span class="toc-text">express 下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#express-%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-text">express 初体验</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#express-%E8%B7%AF%E7%94%B1"><span class="toc-text">express 路由</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%B7%AF%E7%94%B1"><span class="toc-text">什么是路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">路由的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-text">获取请求参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0"><span class="toc-text">获取路由参数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#express-%E5%93%8D%E5%BA%94%E8%AE%BE%E7%BD%AE"><span class="toc-text">express 响应设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#express-%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">express 中间件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">什么是中间件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">中间件的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">中间件的类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">定义全局中间件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E5%85%A8%E5%B1%80%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">多个全局中间件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E8%B7%AF%E7%94%B1%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">定义路由中间件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">静态资源中间件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%BD%93%E6%95%B0%E6%8D%AE-body-parser"><span class="toc-text">获取请求体数据 body-parser</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Router"><span class="toc-text">Router</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-Router"><span class="toc-text">什么是 Router</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Router-%E4%BD%9C%E7%94%A8"><span class="toc-text">Router 作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Router-%E4%BD%BF%E7%94%A8"><span class="toc-text">Router 使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#EJS-%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-text">EJS 模板引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-text">什么是模板引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-EJS"><span class="toc-text">什么是 EJS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EJS-%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-text">EJS 初体验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EJS-%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="toc-text">EJS 常用语法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MongoDB"><span class="toc-text">MongoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mongodb-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">Mongodb 是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">数据库是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">数据库的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-text">数据库管理数据的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-Mongodb"><span class="toc-text">为什么选择 Mongodb</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">核心概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E4%B8%8E%E5%90%AF%E5%8A%A8"><span class="toc-text">下载安装与启动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BA%A4%E4%BA%92"><span class="toc-text">命令行交互</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4"><span class="toc-text">数据库命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E5%91%BD%E4%BB%A4"><span class="toc-text">集合命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%E5%91%BD%E4%BB%A4"><span class="toc-text">文档命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">应用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E"><span class="toc-text">新增</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-text">删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0"><span class="toc-text">更新</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2"><span class="toc-text">查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mongoose"><span class="toc-text">Mongoose</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-2"><span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="toc-text">作用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B"><span class="toc-text">使用流程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B"><span class="toc-text">字段类型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E5%80%BC%E9%AA%8C%E8%AF%81"><span class="toc-text">字段值验证</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BF%85%E5%A1%AB%E9%A1%B9"><span class="toc-text">必填项</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-text">默认值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E5%80%BC"><span class="toc-text">枚举值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%94%AF%E4%B8%80%E5%80%BC"><span class="toc-text">唯一值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CURD"><span class="toc-text">CURD</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0"><span class="toc-text">增加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-1"><span class="toc-text">删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0-1"><span class="toc-text">更新</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2-1"><span class="toc-text">查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%8E%A7%E5%88%B6"><span class="toc-text">条件控制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">运算符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="toc-text">逻辑运算</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D"><span class="toc-text">正则匹配</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AA%E6%80%A7%E5%8C%96%E8%AF%BB%E5%8F%96"><span class="toc-text">个性化读取</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E7%AD%9B%E9%80%89"><span class="toc-text">字段筛选</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8E%92%E5%BA%8F"><span class="toc-text">数据排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%88%AA%E5%8F%96"><span class="toc-text">数据截取</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-text">图形化管理工具</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-text">接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">接口是什么</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">接口的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%BC%80%E5%8F%91%E4%B8%8E%E8%B0%83%E7%94%A8"><span class="toc-text">接口的开发与调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-text">接口的组成</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RESTful-API"><span class="toc-text">RESTful API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-server"><span class="toc-text">json-server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7"><span class="toc-text">接口测试工具</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E6%8E%A7%E5%88%B6"><span class="toc-text">会话控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-3"><span class="toc-text">介绍</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie"><span class="toc-text">cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cookie-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">cookie 是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cookie-%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-text">cookie 的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cookie-%E7%9A%84%E8%BF%90%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">cookie 的运行流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E6%93%8D%E4%BD%9C-cookie"><span class="toc-text">浏览器操作 cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cookie-%E7%9A%84%E4%BB%A3%E7%A0%81%E6%93%8D%E4%BD%9C"><span class="toc-text">cookie 的代码操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#session"><span class="toc-text">session</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">session 是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">session 的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E8%BF%90%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">session 运行流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E7%9A%84%E4%BB%A3%E7%A0%81%E6%93%8D%E4%BD%9C"><span class="toc-text">session 的代码操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E5%92%8C-cookie-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">session 和 cookie 的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#token"><span class="toc-text">token</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#token-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">token 是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#token-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">token 的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#token-%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">token 的工作流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#token-%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-text">token 的特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JWT-jsonwebToken"><span class="toc-text">JWT(jsonwebToken)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95"><span class="toc-text">附录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E5%9F%9F%E5%90%8D"><span class="toc-text">本地域名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">操作流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-text">原理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%90%86%E8%A7%A3-Node-js-%E4%B8%AD%E7%9A%84%E5%9B%9E%E8%B0%83-Callback-%E5%87%BD%E6%95%B0"><span class="toc-text">理解 Node.js 中的回调(Callback)函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB-%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF"><span class="toc-text">分类 编程技术</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/05/17/%E7%AC%AC%E4%B8%83%E7%AF%87%E6%96%87%E7%AB%A0/" title="Liunx"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/6d/wallhaven-6d57ox.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Liunx"/></a><div class="content"><a class="title" href="/2023/05/17/%E7%AC%AC%E4%B8%83%E7%AF%87%E6%96%87%E7%AB%A0/" title="Liunx">Liunx</a><time datetime="2023-05-17T07:50:00.000Z" title="发表于 2023-05-17 15:50:00">2023-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/17/%E7%AC%AC%E4%BA%94%E7%AF%87%E6%96%87%E7%AB%A0/" title="Vue"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/o5/wallhaven-o51q1p.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue"/></a><div class="content"><a class="title" href="/2023/05/17/%E7%AC%AC%E4%BA%94%E7%AF%87%E6%96%87%E7%AB%A0/" title="Vue">Vue</a><time datetime="2023-05-17T07:40:00.000Z" title="发表于 2023-05-17 15:40:00">2023-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/17/%E7%AC%AC%E5%85%AD%E7%AF%87%E6%96%87%E7%AB%A0/" title="NodeJS"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/gp/wallhaven-gpqypd.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NodeJS"/></a><div class="content"><a class="title" href="/2023/05/17/%E7%AC%AC%E5%85%AD%E7%AF%87%E6%96%87%E7%AB%A0/" title="NodeJS">NodeJS</a><time datetime="2023-05-17T07:40:00.000Z" title="发表于 2023-05-17 15:40:00">2023-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/13/%E7%AC%AC%E4%BA%8C%E7%AF%87%E6%96%87%E7%AB%A0/" title="Axios基础"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/6d/wallhaven-6d57ox.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Axios基础"/></a><div class="content"><a class="title" href="/2023/05/13/%E7%AC%AC%E4%BA%8C%E7%AF%87%E6%96%87%E7%AB%A0/" title="Axios基础">Axios基础</a><time datetime="2023-05-13T04:43:00.000Z" title="发表于 2023-05-13 12:43:00">2023-05-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/13/%E7%AC%AC%E5%9B%9B%E7%AF%87%E6%96%87%E7%AB%A0/" title="TypeScript"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/6d/wallhaven-6d57ox.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TypeScript"/></a><div class="content"><a class="title" href="/2023/05/13/%E7%AC%AC%E5%9B%9B%E7%AF%87%E6%96%87%E7%AB%A0/" title="TypeScript">TypeScript</a><time datetime="2023-05-13T04:43:00.000Z" title="发表于 2023-05-13 12:43:00">2023-05-13</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By LuoMu</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script defer src="/js/light.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/cursor.js"></script><script async src="//at.alicdn.com/t/c/font_4072414_nki0qx308zi.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer data-pjax src="/js/readPercent.js"></script><script async src="https://npm.elemecdn.com/tzy-blog/lib/js/other/sakura.js"></script><script async src="/js/fps.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://w.wallhaven.cc/full/jx/wallhaven-jx175q.jpg);"> <a class="categoryBar-list-link" href="categories/前端/">-前端</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">前端</span></li><li class="categoryBar-list-item" style="background:url(https://w.wallhaven.cc/full/5g/wallhaven-5g5ow3.jpg);"> <a class="categoryBar-list-link" href="categories/拓展/">-拓展</a><span class="categoryBar-list-count">4</span><span class="categoryBar-list-descr">拓展</span></li><li class="categoryBar-list-item" style="background:url(https://w.wallhaven.cc/full/6d/wallhaven-6d56k6.jpg);"> <a class="categoryBar-list-link" href="categories/操作系统/">-操作系统</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">操作系统</span></li></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = 'e2b04289e870b005374ee030148d64fd&s=rsv3';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.2.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.3.1" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用多线部署，主线路托管于Vercel" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://dashboard.4everland.org/" style="margin-inline:5px" data-title="本站采用多线部署，备用线路托管于4EVERLAND" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-4EVERLAND-22DDDD?style=flat&amp;logo=IPFS" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/05/12/第一篇文章/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/6d/wallhaven-6d57ox.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-12</span><a class="blog-slider__title" href="2023/05/12/第一篇文章/" alt="">Ajax基础</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/05/12/第一篇文章/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/05/13/第二篇文章/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/6d/wallhaven-6d57ox.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-13</span><a class="blog-slider__title" href="2023/05/13/第二篇文章/" alt="">Axios基础</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/05/13/第二篇文章/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/05/12/第三篇文章/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://w.wallhaven.cc/full/zy/wallhaven-zyqlkv.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-12</span><a class="blog-slider__title" href="2023/05/12/第三篇文章/" alt="">Promise基础</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/05/12/第三篇文章/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__fadeInDown');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '1s');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '2');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__fadeInRight');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('pagination');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__heartBeat');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --></body></html>